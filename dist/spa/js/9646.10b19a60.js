"use strict";(self["webpackChunkborough_fe"]=self["webpackChunkborough_fe"]||[]).push([[9646],{9646:(e,t,l)=>{l.r(t),l.d(t,{default:()=>E});var a=l(9835),s=l(799),o=l(6970);const n={class:"q-pa-md"},i=(0,a.Uk)(" Company Information"),u={class:"row"},d={class:"col-sm-12 col-md-12 q-pa-sm"},c={class:"col-sm-12 col-md-12 q-pa-sm"},r={class:"col-sm-12 col-md-12 q-pa-sm"},m={class:"row"},p={class:"col-sm-12 col-md-4 q-pa-sm"},_={class:"col-sm-12 col-md-4 q-pa-sm"},h=(0,a.Uk)(" No results "),f=(0,a._)("hr",{class:"q-tabs-gutter",color:"lightgray"},null,-1),g=(0,a.Uk)(" Cancel");function q(e,t,l,q,v,b){const w=(0,a.up)("q-icon"),C=(0,a.up)("q-input"),V=(0,a.up)("q-item-section"),k=(0,a.up)("q-item"),Z=(0,a.up)("q-select"),I=(0,a.up)("q-form"),S=(0,a.up)("q-card-section"),W=(0,a.up)("q-card"),y=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",n,[(0,a.Wm)(W,{bordered:"",class:"my-card",elevated:"",square:!0},{default:(0,a.w5)((()=>[(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(w,{name:"label_important",class:"text-h6 text-red-15"}),i]),(0,a.Wm)(I,{ref:"announcement_form",onSubmit:(0,s.iM)(b.submit,["prevent"]),greedy:!0},{default:(0,a.w5)((()=>[(0,a._)("div",u,[(0,a._)("div",d,[(0,a.Wm)(C,{outlined:"",label:"Title *",modelValue:e.title,"onUpdate:modelValue":t[0]||(t[0]=t=>e.title=t),rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])]),(0,a._)("div",c,[(0,a.Wm)(C,{modelValue:e.details,"onUpdate:modelValue":t[1]||(t[1]=t=>e.details=t),"input-debounce":"0",outlined:"",label:"Details *",type:"textarea",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])]),(0,a._)("div",r,[(0,a.Wm)(C,{modelValue:e.link,"onUpdate:modelValue":t[2]||(t[2]=t=>e.link=t),"input-debounce":"0",outlined:"",label:"Link *",type:"textarea",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])])]),(0,a._)("div",m,[(0,a._)("div",p,[(0,a.Wm)(C,{outlined:"",label:"Posting Date *",modelValue:e.pdate,"onUpdate:modelValue":t[3]||(t[3]=t=>e.pdate=t),type:"date",onFocus:t[4]||(t[4]=t=>e.show_posting_date=!0),rules:[e=>!!e||"Field is required"],"stack-label":""},null,8,["modelValue","rules"])]),(0,a._)("div",_,[(0,a.Wm)(Z,{modelValue:e.status,"onUpdate:modelValue":t[5]||(t[5]=t=>e.status=t),"input-debounce":"0",outlined:"",label:"Status *",options:e.options,rules:[e=>!!e||"Field is required"]},{"no-option":(0,a.w5)((()=>[(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Wm)(V,{class:"text-grey"},{default:(0,a.w5)((()=>[h])),_:1})])),_:1})])),_:1},8,["modelValue","options","rules"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1}),f,(0,a._)("div",null,[(0,a.Wm)(y,{color:"primary",class:"q-mt-xl",onClick:b.submit},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{name:"save"}),(0,a.Uk)(" "+(0,o.zw)(b.is_update?"Save Changes":"Save"),1)])),_:1},8,["onClick"]),(0,a.Wm)(y,{color:"red-14",outline:"",class:"q-mt-xl q-ml-md",to:{name:"announcement-lists"}},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{name:"cancel"}),g])),_:1})])])])}var v=l(6827);const b={data:()=>({title:"",details:"",link:"",number_of_view:"",show_posting_date:!1,options:[],pdate:null,status:""}),mounted(){this.options=["ACTIVE","INACTIVE"],this.status="ACTIVE",console.log(this.$route.params,"PARAMS")},computed:{is_update(){return!!this.$route.params.id&&(console.log("SHOULD GET SPECIFIC"),this.getSpecific(),!0)},selectedID(){return this.$route.params.id}},methods:{async validate(e){return await this.$refs.announcement_form.validate()},async getSpecific(){let e=this,t={id:e.selectedID},{data:l,status:a}=await this.$store.dispatch("announcements/getSpecificAnnouncement",t);if(console.log(l,"GET SPECIFIC"),[200,201].includes(a))for(let s in l)e[s]=l[s]},async submit(){console.log(await this.validate());let e=this;if(await this.validate()){let t={title:e.title.toUpperCase(),details:e.details.toUpperCase(),link:e.link.toUpperCase(),pdate:e.pdate.toUpperCase()},l="announcements/addAnnouncement",a="created";e.is_update&&(t={data:t,id:e.selectedID},a="updated",l="announcements/updateAnnouncement");let{data:s,status:o}=await this.$store.dispatch(l,t);[200,201].includes(o)?(v.Z.create({message:`Successfully ${a} announcement.`,position:"top-right",closeBtn:"X",timeout:2e3,color:"green"}),this.$router.push({name:"announcement-lists"})):v.Z.create({message:s.message,position:"top-right",closeBtn:"X",timeout:2e3,color:"red"})}else v.Z.create({message:"Validation error. Kindly check all fields!",position:"top-right",closeBtn:"X",timeout:2e3})},isValidEmail(e){const t=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return t.test(e)||"Invalid email"}}};var w=l(1639),C=l(4458),V=l(3190),k=l(2857),Z=l(8326),I=l(6611),S=l(7887),W=l(490),y=l(1233),U=l(7817),A=l(8879),Q=l(9984),$=l.n(Q);const F=(0,w.Z)(b,[["render",q]]),E=F;$()(b,"components",{QCard:C.Z,QCardSection:V.Z,QIcon:k.Z,QForm:Z.Z,QInput:I.Z,QSelect:S.Z,QItem:W.Z,QItemSection:y.Z,QTabs:U.Z,QBtn:A.Z})}}]);