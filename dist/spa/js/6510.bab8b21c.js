"use strict";(self["webpackChunkborough_fe"]=self["webpackChunkborough_fe"]||[]).push([[6510],{6510:(e,t,i)=>{i.r(t),i.d(t,{default:()=>A});var s=i(9835),a=i(799),o=i(6970);const d={key:0,class:"loading-page"},l={class:"text-center"},n=(0,s._)("br",null,null,-1),u=(0,s._)("span",{class:"text-white"},"FETCHING DATA",-1),c={class:"q-pa-md"},r=(0,s.Uk)(" Type of Medium Informations"),m={class:"row"},p={class:"col-6 q-pa-sm"},h={class:"col-6 q-pa-sm"},_=(0,s._)("hr",{class:"q-tabs-gutter",color:"lightgray"},null,-1);function g(e,t,i,g,f,x){const v=(0,s.up)("q-spinner-ios"),w=(0,s.up)("q-icon"),I=(0,s.up)("q-select"),b=(0,s.up)("q-form"),y=(0,s.up)("q-card-section"),q=(0,s.up)("q-card"),Z=(0,s.up)("q-btn");return(0,s.wg)(),(0,s.iD)("div",null,[e.is_loading?((0,s.wg)(),(0,s.iD)("div",d,[(0,s._)("div",l,[(0,s.Wm)(v,{color:"white",size:"3rem"}),n,u])])):(0,s.kq)("",!0),(0,s._)("div",c,[(0,s.Wm)(q,{bordered:"",class:"my-card",elevated:"",square:!0},{default:(0,s.w5)((()=>[(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(w,{name:"label_important",class:"text-h6 text-red-15"}),r]),(0,s.Wm)(b,{ref:"announcement_form",onSubmit:(0,a.iM)(x.submit,["prevent"]),greedy:!0},{default:(0,s.w5)((()=>[(0,s._)("div",m,[(0,s._)("div",p,[(0,s.Wm)(I,{outlined:"",label:"Type of Medium *","option-label":"desc","option-value":"id",options:e.medium_options,modelValue:e.mediumId,"onUpdate:modelValue":t[0]||(t[0]=t=>e.mediumId=t),rules:[e=>!!e||"Field is required"]},null,8,["options","modelValue","rules"])]),(0,s._)("div",h,[(0,s.Wm)(I,{outlined:"",label:"Type of Execution *",modelValue:e.executionId,"onUpdate:modelValue":t[1]||(t[1]=t=>e.executionId=t),options:e.execution_options,"option-value":"id","option-label":"type",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","options","rules"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1}),_,(0,s._)("div",null,[(0,s.Wm)(Z,{color:"primary",class:"q-mt-xl",onClick:x.submit},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{name:"save"}),(0,s.Uk)(" "+(0,o.zw)(x.is_update?"Save Changes":"Save"),1)])),_:1},8,["onClick"])])])])}var f=i(4328);const x={data:()=>({is_loading:!1,mediumId:null,executionId:null,medium_options:[],execution_options:[]}),watch:{},computed:{is_update(){return this.$route.params.id?(this.getSpecific(),!0):(this.initApp(),!1)},selectedID(){return this.$route.params.id}},mounted(){},methods:{initApp(){this.getMediums(),this.getExecutions()},async validate(e){return await this.$refs.announcement_form.validate()},async getMediums(){let e=this,t={page:1,size:100,order:"desc:asc",search:""},{data:i,status:s}=await e.$store.dispatch("medium/get",t);[200,201].includes(s)&&(e.medium_options=i.rows)},async getExecutions(){let e=this,t={page:1,size:100,order:"type:asc",search:""},{data:i,status:s}=await e.$store.dispatch("execution/get",t);[200,201].includes(s)&&(e.execution_options=i.rows)},async getSpecific(){let e=this;e.is_loading=!0;let t={id:e.selectedID};await this.getMediums(),await this.getExecutions();let{data:i,status:s}=await e.$store.dispatch("medium_execution/getSpecific",t);if(console.log(i),[200,201].includes(s)){for(let t in i)e[t]=i[t],"mediumId"==t?e.mediumId=e.medium_options.filter((e=>e.id==i["mediumId"]))[0]:"executionId"==t&&(e.executionId=e.execution_options.filter((e=>e.id==i["executionId"]))[0]);e["static_val"]=i.static}e.is_loading=!1},async submit(){let e=this;if(console.log(await this.validate()),await this.validate()){let t={mediumId:e.mediumId.id,executionId:e.executionId.id},i="medium_execution/add",s="created";e.is_update&&(t={data:t,id:e.selectedID},s="updated",i="medium_execution/update");let{data:a,status:o}=await this.$store.dispatch(i,t);[200,201].includes(o)?(f.Z.create({message:`Successfully ${s} Type of Medium.`,position:"top-right",closeBtn:"X",timeout:2e3,color:"green"}),this.$router.push({name:"medium-execution-lists"})):f.Z.create({message:a.message,position:"top-right",closeBtn:"X",timeout:2e3,color:"red"})}else f.Z.create({message:"Validation error. Kindly check all fields!",position:"top-right",closeBtn:"X",timeout:2e3})},isValidEmail(e){const t=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return t.test(e)||"Invalid email"}}};var v=i(1639),w=i(8359),I=i(4458),b=i(3190),y=i(2857),q=i(8326),Z=i(7887),k=i(7817),S=i(8879),$=i(9984),W=i.n($);const z=(0,v.Z)(x,[["render",g]]),A=z;W()(x,"components",{QSpinnerIos:w.Z,QCard:I.Z,QCardSection:b.Z,QIcon:y.Z,QForm:q.Z,QSelect:Z.Z,QTabs:k.Z,QBtn:S.Z})}}]);