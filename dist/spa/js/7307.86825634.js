"use strict";(self["webpackChunkborough_fe"]=self["webpackChunkborough_fe"]||[]).push([[7307],{7307:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var l=a(9835),s=a(799),o=a(6970);const i={class:"q-pa-md"},d=(0,l.Uk)(" Email Information"),c={class:"row"},u={class:"col-sm-12 col-md-6 q-pa-sm"},r={class:"col-sm-12 col-md-6 q-pa-sm"},n={class:"col-sm-12 col-md-12 q-pa-sm"},m={class:"col-sm-12 col-md-12 q-pa-sm"},p=(0,l._)("hr",{class:"q-tabs-gutter",color:"lightgray"},null,-1);function h(e,t,a,h,b,f){const _=(0,l.up)("q-icon"),g=(0,l.up)("q-input"),v=(0,l.up)("RichText"),q=(0,l.up)("q-form"),Z=(0,l.up)("q-card-section"),w=(0,l.up)("q-card"),y=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",i,[(0,l.Wm)(w,{bordered:"",class:"my-card",elevated:"",square:!0},{default:(0,l.w5)((()=>[(0,l.Wm)(Z,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(_,{name:"label_important",class:"text-h6 text-red-15"}),d]),(0,l.Wm)(q,{ref:"announcement_form",onSubmit:(0,s.iM)(f.submit,["prevent"]),greedy:!0},{default:(0,l.w5)((()=>[(0,l._)("div",c,[(0,l._)("div",u,[(0,l.Wm)(g,{outlined:"",label:"Email Code *",modelValue:e.code,"onUpdate:modelValue":t[0]||(t[0]=t=>e.code=t),required:"",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])]),(0,l._)("div",r,[(0,l.Wm)(g,{outlined:"",label:"Subject *",modelValue:e.subject,"onUpdate:modelValue":t[1]||(t[1]=t=>e.subject=t),rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])]),(0,l._)("div",n,[(0,l.Wm)(g,{outlined:"",type:"textarea",label:"Description *",modelValue:e.desc,"onUpdate:modelValue":t[2]||(t[2]=t=>e.desc=t),rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])]),(0,l._)("div",m,[(0,l.Wm)(v,{modelValue:e.body,"onUpdate:modelValue":t[3]||(t[3]=t=>e.body=t)},null,8,["modelValue"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1}),p,(0,l._)("div",null,[(0,l.Wm)(y,{color:"primary",class:"q-mt-xl",onClick:f.submit},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{name:"save"}),(0,l.Uk)(" "+(0,o.zw)(f.is_update?"Save Changes":"Save"),1)])),_:1},8,["onClick"])])])])}var b=a(6827),f=a(7273);const _={data:()=>({code:"",desc:"",subject:"",body:""}),components:{RichText:f.Z},watch:{},computed:{is_update(){return!!this.$route.params.id&&(this.getSpecific(),!0)},selectedID(){return this.$route.params.id}},mounted(){},methods:{async validate(e){return await this.$refs.announcement_form.validate()},async getSpecific(){let e=this,t={id:e.selectedID},{data:a,status:l}=await this.$store.dispatch("email/getSpecificEmail",t);if(console.log(a),[200,201].includes(l))for(let s in a)e[s]=a[s]},async submit(){let e=this;if(console.log(await this.validate()),await this.validate()){let t={code:e.code.toUpperCase(),desc:e.desc.toUpperCase(),subject:e.subject.toUpperCase(),body:e.body.toUpperCase()},a="email/addEmail",l="created";e.is_update&&(t={data:t,id:e.selectedID},l="updated",a="email/updateEmail"),console.log(t);let{data:s,status:o}=await this.$store.dispatch(a,t);[200,201].includes(o)?(b.Z.create({message:`Successfully ${l} Email Template.`,position:"top-right",closeBtn:"X",timeout:2e3,color:"green"}),this.$router.push({name:"email-lists"})):b.Z.create({message:s.message,position:"top-right",closeBtn:"X",timeout:2e3,color:"red"})}else b.Z.create({message:"Validation error. Kindly check all fields!",position:"top-right",closeBtn:"X",timeout:2e3})},isValidEmail(e){const t=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return t.test(e)||"Invalid email"}}};var g=a(1639),v=a(4458),q=a(3190),Z=a(2857),w=a(8326),y=a(6611),V=a(7817),C=a(8879),S=a(9984),U=a.n(S);const W=(0,g.Z)(_,[["render",h]]),k=W;U()(_,"components",{QCard:v.Z,QCardSection:q.Z,QIcon:Z.Z,QForm:w.Z,QInput:y.Z,QTabs:V.Z,QBtn:C.Z})}}]);