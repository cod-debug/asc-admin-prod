"use strict";(self["webpackChunkborough_fe"]=self["webpackChunkborough_fe"]||[]).push([[7586],{7586:(e,l,a)=>{a.r(l),a.d(l,{default:()=>X});var t=a(9835),i=a(799),o=a(6970);const s={class:"q-pa-md"},n=(0,t.Uk)(" Company Information"),d={class:"row"},m={class:"col-sm-12 col-md-8 q-pa-sm"},u={class:"col-sm-12 col-md-4 q-pa-sm"},r=(0,t.Uk)(" No results "),c={class:"row"},p={class:"col-sm-12 col-md-3 q-pa-sm"},_={class:"col-sm-12 col-md-3 q-pa-sm"},f={class:"col-sm-12 col-md-3 q-pa-sm"},h={class:"col-sm-12 col-md-3 q-pa-sm"},y={class:"row"},b={class:"col-sm-12 col-md-6 q-pa-sm"},v={class:"col-sm-12 col-md-6 q-pa-sm"},g=(0,t.Uk)(" Address"),q={class:"row"},V={class:"col-sm-12 col-md-6 q-pa-sm"},w={class:"col-sm-12 col-md-6 q-pa-sm"},A=(0,t._)("hr",{class:"q-tabs-gutter",color:"lightgray"},null,-1),W=(0,t.Uk)(" Cancel");function U(e,l,a,U,C,Z){const S=(0,t.up)("q-icon"),k=(0,t.up)("q-input"),I=(0,t.up)("q-item-section"),F=(0,t.up)("q-item"),N=(0,t.up)("q-select"),Q=(0,t.up)("q-form"),$=(0,t.up)("q-card-section"),z=(0,t.up)("q-card"),x=(0,t.up)("q-btn");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",s,[(0,t.Wm)(z,{bordered:"",class:"my-card",elevated:"",square:!0},{default:(0,t.w5)((()=>[(0,t.Wm)($,null,{default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(S,{name:"label_important",class:"text-h6 text-red-15"}),n]),(0,t.Wm)(Q,{ref:"company_info_form",onSubmit:(0,i.iM)(Z.submit,["prevent"]),greedy:!0},{default:(0,t.w5)((()=>[(0,t._)("div",d,[(0,t._)("div",m,[(0,t.Wm)(k,{outlined:"",label:"Company Name *",modelValue:e.company_name,"onUpdate:modelValue":l[0]||(l[0]=l=>e.company_name=l),rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])]),(0,t._)("div",u,[(0,t.Wm)(N,{modelValue:e.affiliation,"onUpdate:modelValue":l[1]||(l[1]=l=>e.affiliation=l),"input-debounce":"0",outlined:"",label:"Affiliation *",options:e.options,"option-value":e=>null===e?null:e.id,"option-label":e=>null===e?null:e.name,rules:[e=>!!e||"Field is required"]},{"no-option":(0,t.w5)((()=>[(0,t.Wm)(F,null,{default:(0,t.w5)((()=>[(0,t.Wm)(I,{class:"text-grey"},{default:(0,t.w5)((()=>[r])),_:1})])),_:1})])),_:1},8,["modelValue","options","option-value","option-label","rules"])])]),(0,t._)("div",c,[(0,t._)("div",p,[(0,t.Wm)(k,{outlined:"",label:"Mobile Number *",modelValue:e.mobile_num,"onUpdate:modelValue":l[2]||(l[2]=l=>e.mobile_num=l),rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])]),(0,t._)("div",_,[(0,t.Wm)(k,{outlined:"",label:"Telephone Number *",modelValue:e.telephone_number,"onUpdate:modelValue":l[3]||(l[3]=l=>e.telephone_number=l),rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])]),(0,t._)("div",f,[(0,t.Wm)(k,{outlined:"",label:"Alternate Telephone Number*",modelValue:e.alt_telephone_number,"onUpdate:modelValue":l[4]||(l[4]=l=>e.alt_telephone_number=l),rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])]),(0,t._)("div",h,[(0,t.Wm)(k,{outlined:"",label:"TIN *",modelValue:e.company_tin,"onUpdate:modelValue":l[5]||(l[5]=l=>e.company_tin=l),rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])])]),(0,t._)("div",y,[(0,t._)("div",b,[(0,t.Wm)(k,{outlined:"",label:"Accounting Representative *",modelValue:e.accounting_rep,"onUpdate:modelValue":l[6]||(l[6]=l=>e.accounting_rep=l),rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])]),(0,t._)("div",v,[(0,t.Wm)(k,{outlined:"",label:"Representative Email Address *",modelValue:e.accounting_rep_email,"onUpdate:modelValue":l[7]||(l[7]=l=>e.accounting_rep_email=l),type:"email",rules:[e=>!!e||"Field is required",Z.isValidEmail]},null,8,["modelValue","rules"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1}),(0,t.Wm)(z,{bordered:"",class:"my-card q-my-md",elevated:"",square:!0},{default:(0,t.w5)((()=>[(0,t.Wm)($,null,{default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(S,{name:"label_important",class:"text-h6 text-red-15"}),g]),(0,t.Wm)(Q,{ref:"company_adress_form",onSubmit:(0,i.iM)(Z.submit,["prevent"]),greedy:!0},{default:(0,t.w5)((()=>[(0,t._)("div",q,[(0,t._)("div",V,[(0,t.Wm)(k,{outlined:"",label:"Country *",modelValue:e.country,"onUpdate:modelValue":l[8]||(l[8]=l=>e.country=l),rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])]),(0,t._)("div",w,[(0,t.Wm)(k,{outlined:"",label:"Company Address *",modelValue:e.company_address,"onUpdate:modelValue":l[9]||(l[9]=l=>e.company_address=l),rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1}),A,(0,t._)("div",null,[(0,t.Wm)(x,{color:"primary",class:"q-mt-xl",onClick:Z.submit},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{name:"save"}),(0,t.Uk)(" "+(0,o.zw)(Z.is_update?"Save Changes":"Save"),1)])),_:1},8,["onClick"]),(0,t.Wm)(x,{color:"red-14",outline:"",class:"q-mt-xl q-ml-md",to:{name:"company-lists"}},{default:(0,t.w5)((()=>[(0,t.Wm)(S,{name:"cancel"}),W])),_:1})])])])}var C=a(6827);const Z={data:()=>({add_company:!0,company_name:"",affiliation:{},mobile_num:"",telephone_number:"",alt_telephone_number:"",company_tin:"",accounting_rep:"",accounting_rep_email:"",country:"",company_address:"",options:[],size:100}),mounted(){this.initApp()},computed:{is_update(){return this.$route.params.id?(this.getSpecific(),!0):(this.initApp(),!1)},selectedID(){return this.$route.params.id}},methods:{async validate(e){return await this.$refs.company_info_form.validate()||await this.$refs.company_adress_form.validate()},async submit(){console.log(await this.validate());let e=this;if(await this.validate()){let l={type:"c",name:this.company_name.toUpperCase(),address:this.company_address.toUpperCase(),country:this.country.toUpperCase(),tinno:this.company_tin.toUpperCase(),phone:this.telephone_number.toUpperCase(),mobile:this.mobile_num.toUpperCase(),contact:{title:"NA",fname:this.accounting_rep.toUpperCase(),lname:"NA",mname:"NA",phone:"NA",email:this.accounting_rep_email},affiliateID:this.affiliation.id},a="company/add",t="created";e.is_update&&(l={data:l,id:e.selectedID},t="updated",a="company/update");let{data:i,status:o}=await this.$store.dispatch(a,l);[200,201].includes(o)?C.Z.create({message:`Successfully ${t} company.`,position:"top-right",closeBtn:"X",timeout:2e3,color:"green"}):C.Z.create({message:"Something went wrong!",position:"top-right",closeBtn:"X",timeout:2e3,color:"red"})}else C.Z.create({message:"Validation error. Kindly check all fields!",position:"top-right",closeBtn:"X",timeout:2e3})},initApp(){this.getAllAffiliation()},async getSpecific(){let e=this;e.is_loading=!0;let l={id:e.selectedID};await this.getAllAffiliation();let{data:a,status:t}=await e.$store.dispatch("company/getSpecific",l);[200,201].includes(t)&&(e.company_name=a.name,e.company_address=a.address,e.affiliation.id=a.affiliateId,e.country=a.country.code,e.company_tin=a.tinno,e.telephone_number=a.phone,e.mobile_num=a.mobile,e["static_val"]=a.static),e.is_loading=!1},async getAllAffiliation(){let e={page:1,size:this.size,order:"id:asc",search:""};try{let{data:l,status:a}=await this.$store.dispatch("affiliation/getAllAffiliation",e);this.options=l.rows}catch(l){}},isValidEmail(e){const l=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return l.test(e)||"Invalid email"}}};var S=a(1639),k=a(4458),I=a(3190),F=a(2857),N=a(8326),Q=a(6611),$=a(7887),z=a(490),x=a(1233),D=a(7817),B=a(8879),T=a(2304),E=a.n(T);const M=(0,S.Z)(Z,[["render",U]]),X=M;E()(Z,"components",{QCard:k.Z,QCardSection:I.Z,QIcon:F.Z,QForm:N.Z,QInput:Q.Z,QSelect:$.Z,QItem:z.Z,QItemSection:x.Z,QTabs:D.Z,QBtn:B.Z})}}]);