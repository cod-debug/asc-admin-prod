"use strict";(self["webpackChunkborough_fe"]=self["webpackChunkborough_fe"]||[]).push([[5395],{35395:(e,t,a)=>{a.r(t),a.d(t,{default:()=>$});var s=a(59835),i=a(799),l=a(86970);const o={class:"q-pa-md"},r=(0,s.Uk)(" Reason Information"),n={class:"row"},d={class:"col-12 q-pa-sm"},c=(0,s.Uk)(" /> "),u=(0,s._)("hr",{class:"q-tabs-gutter",color:"lightgray"},null,-1);function m(e,t,a,m,p,h){const g=(0,s.up)("q-icon"),_=(0,s.up)("q-date"),f=(0,s.up)("q-form"),v=(0,s.up)("q-card-section"),w=(0,s.up)("q-card"),Z=(0,s.up)("q-btn");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",o,[(0,s.Wm)(w,{bordered:"",class:"my-card",elevated:"",square:!0},{default:(0,s.w5)((()=>[(0,s.Wm)(v,null,{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(g,{name:"label_important",class:"text-h6 text-red-15"}),r]),(0,s.Wm)(f,{ref:"announcement_form",onSubmit:(0,i.iM)(h.submit,["prevent"]),greedy:!0},{default:(0,s.w5)((()=>[(0,s._)("div",n,[(0,s._)("div",d,[(0,s.Wm)(_,{modelValue:e.sched,"onUpdate:modelValue":t[0]||(t[0]=t=>e.sched=t),multiple:"",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"]),c])])])),_:1},8,["onSubmit"])])),_:1})])),_:1}),u,(0,s._)("div",null,[(0,s.Wm)(Z,{color:"primary",class:"q-mt-xl",onClick:h.submit},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{name:"save"}),(0,s.Uk)(" "+(0,l.zw)(h.is_update?"Save Changes":"Save"),1)])),_:1},8,["onClick"])])])])}var p=a(6827);const h={props:["id"],data:()=>({sched:[],asc_users:[],selected_user:null,current:1,max:0,size:5,loading_list:!0,take:10}),watch:{},computed:{is_update(){return!!this.$route.params.id&&(this.getSpecific(),!0)},selectedID(){return this.$route.params.id}},mounted(){},methods:{async validate(e){return await this.$refs.announcement_form.validate()},async getSpecific(){let e=this,t={id:e.selectedID},{data:a,status:s}=await this.$store.dispatch("reason/getSpecific",t);if(console.log(a),[200,201].includes(s))for(let i in a)e[i]=a[i]},async getAllNONASC(){this.loading=!0;let e=this;e.loading_list=!0;let t={page:1,size:1e4,order:"id:asc",search:""},{data:a,status:s}=await this.$store.dispatch("account/getAllUsers",t);[200,201].includes(s)&&this.$nextTick((()=>{this.rows=a.rows,e.asc_users=a.rows,e.current=a.cpage,e.max=a.tpage,this.loading=!1})),e.loading_list=!1},async submit(){let e=this;if(console.log(await this.validate()),await this.validate()){let t={sched:e.sched},a="reason/add",s="created";e.is_update&&(t={data:t,id:e.selectedID},s="updated",a="reason/update");let{data:i,status:l}=await this.$store.dispatch(a,t);[200,201].includes(l)?p.Z.create({message:`Successfully ${s} Main Reason Type.`,position:"top-right",closeBtn:"X",timeout:2e3,color:"green"}):p.Z.create({message:i.message,position:"top-right",closeBtn:"X",timeout:2e3,color:"red"})}else p.Z.create({message:"Validation error. Kindly check all fields!",position:"top-right",closeBtn:"X",timeout:2e3})},isValidEmail(e){const t=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return t.test(e)||"Invalid email"}}};var g=a(11639),_=a(44458),f=a(63190),v=a(22857),w=a(8326),Z=a(67088),b=a(47817),k=a(68879),q=a(69984),y=a.n(q);const S=(0,g.Z)(h,[["render",m]]),$=S;y()(h,"components",{QCard:_.Z,QCardSection:f.Z,QIcon:v.Z,QForm:w.Z,QDate:Z.Z,QTabs:b.Z,QBtn:k.Z})}}]);