"use strict";(self["webpackChunkborough_fe"]=self["webpackChunkborough_fe"]||[]).push([[215],{215:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var s=a(9835),i=a(799),o=a(6970);const n={key:0,class:"loading-page"},l={class:"text-center"},c=(0,s._)("br",null,null,-1),r=(0,s._)("span",{class:"text-white"},"FETCHING DATA",-1),u={class:"q-pa-md"},d={class:"row"},p={class:"col-12 q-pa-sm"},m=(0,s._)("hr",{class:"q-tabs-gutter",color:"lightgray"},null,-1);function h(e,t,a,h,g,_){const f=(0,s.up)("q-spinner-ios"),w=(0,s.up)("q-input"),y=(0,s.up)("q-form"),v=(0,s.up)("q-card-section"),Z=(0,s.up)("q-card"),b=(0,s.up)("q-icon"),q=(0,s.up)("q-btn");return(0,s.wg)(),(0,s.iD)("div",null,[e.is_loading?((0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",l,[(0,s.Wm)(f,{color:"white",size:"3rem"}),c,r])])):(0,s.kq)("",!0),(0,s._)("div",u,[(0,s.Wm)(Z,{bordered:"",class:"my-card",elevated:"",square:!0},{default:(0,s.w5)((()=>[(0,s.Wm)(v,null,{default:(0,s.w5)((()=>[(0,s.Wm)(y,{ref:"announcement_form",onSubmit:(0,i.iM)(_.submit,["prevent"]),greedy:!0},{default:(0,s.w5)((()=>[(0,s._)("div",d,[(0,s._)("div",p,[(0,s.Wm)(w,{outlined:"",label:"Type of Execution *",modelValue:e.type,"onUpdate:modelValue":t[0]||(t[0]=t=>e.type=t),rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1}),m,(0,s._)("div",null,[(0,s.Wm)(q,{color:"primary",class:"q-mt-xl",onClick:_.submit},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{name:"save"}),(0,s.Uk)(" "+(0,o.zw)(_.is_update?"Save Changes":"Save"),1)])),_:1},8,["onClick"])])])])}var g=a(6827);const _={data:()=>({type:""}),watch:{},computed:{is_update(){return this.$route.params.id?(this.getSpecific(),!0):(this.initApp(),!1)},selectedID(){return this.$route.params.id}},mounted(){},methods:{initApp(){this.getMainDocuments(),this.getClearances()},async validate(e){return await this.$refs.announcement_form.validate()},async getMainDocuments(){let e=this,t={page:1,size:100,order:"desc:asc",search:""},{data:a,status:s}=await e.$store.dispatch("type_of_docu/getTypeOfMainDocu",t);[200,201].includes(s)&&(e.main_docs_options=a.rows),console.log("KUHA LIST")},async getClearances(){let e=this,t={page:1,size:100,order:"type:asc",search:""},{data:a,status:s}=await e.$store.dispatch("clearance/get",t);[200,201].includes(s)&&(e.clearance_options=a.rows)},async getSpecific(){let e=this;e.is_loading=!0;let t={id:e.selectedID};await this.getClearances(),await this.getMainDocuments();let{data:a,status:s}=await e.$store.dispatch("execution/getSpecific",t);if(console.log(a),[200,201].includes(s)){for(let t in a)e[t]=a[t];e["static_val"]=a.static}e.is_loading=!1},async submit(){let e=this;if(console.log(await this.validate()),await this.validate()){let t={type:e.type.toUpperCase()},a="execution/add",s="created";e.is_update&&(t={data:t,id:e.selectedID},s="updated",a="execution/update");let{data:i,status:o}=await this.$store.dispatch(a,t);[200,201].includes(o)?(g.Z.create({message:`Successfully ${s} Type of Execution.`,position:"top-right",closeBtn:"X",timeout:2e3,color:"green"}),this.$router.push({name:"execution-lists"})):g.Z.create({message:i.message,position:"top-right",closeBtn:"X",timeout:2e3,color:"red"})}else g.Z.create({message:"Validation error. Kindly check all fields!",position:"top-right",closeBtn:"X",timeout:2e3})},isValidEmail(e){const t=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return t.test(e)||"Invalid email"}}};var f=a(1639),w=a(8359),y=a(4458),v=a(3190),Z=a(8326),b=a(6611),q=a(7817),C=a(8879),S=a(2857),$=a(9984),k=a.n($);const D=(0,f.Z)(_,[["render",h]]),x=D;k()(_,"components",{QSpinnerIos:w.Z,QCard:y.Z,QCardSection:v.Z,QForm:Z.Z,QInput:b.Z,QTabs:q.Z,QBtn:C.Z,QIcon:S.Z})}}]);