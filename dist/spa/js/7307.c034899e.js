"use strict";(self["webpackChunkborough_fe"]=self["webpackChunkborough_fe"]||[]).push([[7307],{37273:(e,a,t)=>{t.d(a,{Z:()=>b});var o=t(59835);function l(e,a,t,l,i,s){const n=(0,o.up)("q-icon"),r=(0,o.up)("q-item-section"),c=(0,o.up)("q-color"),d=(0,o.up)("q-item"),f=(0,o.up)("q-list"),u=(0,o.up)("q-btn-dropdown"),m=(0,o.up)("q-editor");return(0,o.wg)(),(0,o.j4)(m,{modelValue:i.editor,"onUpdate:modelValue":a[4]||(a[4]=e=>i.editor=e),"toolbar-bg":"grey-3",ref:"editor",toolbar:[[{label:e.$q.lang.editor.align,icon:e.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]},{label:e.$q.lang.editor.formatting,icon:e.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:e.$q.lang.editor.fontSize,icon:e.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:e.$q.lang.editor.defaultFont,icon:e.$q.iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"token","removeFormat","bold","italic","strike","underline","subscript","superscript","quote","unordered","ordered","outdent","indent","undo","redo"]],fonts:i.fonts},{token:(0,o.w5)((()=>[(0,o.Wm)(u,{dense:"","no-caps":"",ref:"token","no-wrap":"",unelevated:"",color:"white","text-color":"primary",label:"Higlight / Text Color",size:"sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{dense:""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{tag:"label",clickable:"",onClick:a[1]||(a[1]=e=>s.color("backColor",i.highlight))},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{name:"highlight"})])),_:1}),(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,{modelValue:i.highlight,"onUpdate:modelValue":a[0]||(a[0]=e=>i.highlight=e),"default-view":"palette","no-header":"","no-footer":"",palette:["#ffccccaa","#ffe6ccaa","#ffffccaa","#ccffccaa","#ccffe6aa","#ccffffaa","#cce6ffaa","#ccccffaa","#e6ccffaa","#ffccffaa","#ff0000aa","#ff8000aa","#ffff00aa","##00ff00aa","#00ff80aa","#00ffffaa","#0080ffaa","#0000ffaa","#8000ffaa","#ff00ffaa"],class:"my-picker"},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.Wm)(d,{tag:"label",clickable:"",onClick:a[3]||(a[3]=e=>s.color("foreColor",i.foreColor))},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{name:"format_paint"})])),_:1}),(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,{modelValue:i.foreColor,"onUpdate:modelValue":a[2]||(a[2]=e=>i.foreColor=e),"no-header":"","no-footer":"","default-view":"palette",palette:["#ff0000","#ff8000","#ffff00","##00ff00","#00ff80","#00ffff","#0080ff","#0000ff","#8000ff","#ff00ff"],class:"my-picker"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},512)])),_:1},8,["modelValue","toolbar","fonts"])}const i={data(){return{foreColor:"#000000",highlight:"#ffff00aa",editor:"Select some text, then select a highlight or text color!",fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}}},methods:{color(e,a){const t=this.$refs.editor;this.$refs.token.hide(),t.caret.restore(),t.runCmd(e,a),t.focus()}}};var s=t(11639),n=t(84695),r=t(18479),c=t(13246),d=t(490),f=t(76749),u=t(22857),m=t(77741),p=t(69984),h=t.n(p);const g=(0,s.Z)(i,[["render",l]]),b=g;h()(i,"components",{QEditor:n.Z,QBtnDropdown:r.Z,QList:c.Z,QItem:d.Z,QItemSection:f.Z,QIcon:u.Z,QColor:m.Z})},17307:(e,a,t)=>{t.r(a),t.d(a,{default:()=>$});var o=t(59835),l=t(799),i=t(86970);const s={class:"q-pa-md"},n=(0,o.Uk)(" Email Information"),r={class:"row"},c={class:"col-sm-12 col-md-6 q-pa-sm"},d={class:"col-sm-12 col-md-6 q-pa-sm"},f={class:"col-sm-12 col-md-12 q-pa-sm"},u={class:"col-sm-12 col-md-12 q-pa-sm"},m=(0,o._)("hr",{class:"q-tabs-gutter",color:"lightgray"},null,-1);function p(e,a,t,p,h,g){const b=(0,o.up)("q-icon"),_=(0,o.up)("q-input"),w=(0,o.up)("RichText"),q=(0,o.up)("q-form"),v=(0,o.up)("q-card-section"),C=(0,o.up)("q-card"),Z=(0,o.up)("q-btn");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",s,[(0,o.Wm)(C,{bordered:"",class:"my-card",elevated:"",square:!0},{default:(0,o.w5)((()=>[(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(b,{name:"label_important",class:"text-h6 text-red-15"}),n]),(0,o.Wm)(q,{ref:"announcement_form",onSubmit:(0,l.iM)(g.submit,["prevent"]),greedy:!0},{default:(0,o.w5)((()=>[(0,o._)("div",r,[(0,o._)("div",c,[(0,o.Wm)(_,{outlined:"",label:"Email Code *",modelValue:e.code,"onUpdate:modelValue":a[0]||(a[0]=a=>e.code=a),required:"",rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])]),(0,o._)("div",d,[(0,o.Wm)(_,{outlined:"",label:"Subject *",modelValue:e.subject,"onUpdate:modelValue":a[1]||(a[1]=a=>e.subject=a),rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])]),(0,o._)("div",f,[(0,o.Wm)(_,{outlined:"",type:"textarea",label:"Description *",modelValue:e.desc,"onUpdate:modelValue":a[2]||(a[2]=a=>e.desc=a),rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])]),(0,o._)("div",u,[(0,o.Wm)(w,{modelValue:e.body,"onUpdate:modelValue":a[3]||(a[3]=a=>e.body=a)},null,8,["modelValue"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1}),m,(0,o._)("div",null,[(0,o.Wm)(Z,{color:"primary",class:"q-mt-xl",onClick:g.submit},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{name:"save"}),(0,o.Uk)(" "+(0,i.zw)(g.is_update?"Save Changes":"Save"),1)])),_:1},8,["onClick"])])])])}var h=t(6827),g=t(37273);const b={data:()=>({code:"",desc:"",subject:"",body:""}),components:{RichText:g.Z},watch:{},computed:{is_update(){return!!this.$route.params.id&&(this.getSpecific(),!0)},selectedID(){return this.$route.params.id}},mounted(){},methods:{async validate(e){return await this.$refs.announcement_form.validate()},async getSpecific(){let e=this,a={id:e.selectedID},{data:t,status:o}=await this.$store.dispatch("email/getSpecificEmail",a);if(console.log(t),[200,201].includes(o))for(let l in t)e[l]=t[l]},async submit(){let e=this;if(console.log(await this.validate()),await this.validate()){let a={code:e.code.toUpperCase(),desc:e.desc.toUpperCase(),subject:e.subject.toUpperCase(),body:e.body.toUpperCase()},t="email/addEmail",o="created";e.is_update&&(a={data:a,id:e.selectedID},o="updated",t="email/updateEmail"),console.log(a);let{data:l,status:i}=await this.$store.dispatch(t,a);[200,201].includes(i)?(h.Z.create({message:`Successfully ${o} Email Template.`,position:"top-right",closeBtn:"X",timeout:2e3,color:"green"}),this.$router.push({name:"email-lists"})):h.Z.create({message:l.message,position:"top-right",closeBtn:"X",timeout:2e3,color:"red"})}else h.Z.create({message:"Validation error. Kindly check all fields!",position:"top-right",closeBtn:"X",timeout:2e3})},isValidEmail(e){const a=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return a.test(e)||"Invalid email"}}};var _=t(11639),w=t(44458),q=t(63190),v=t(22857),C=t(8326),Z=t(66611),k=t(47817),V=t(68879),W=t(69984),y=t.n(W);const S=(0,_.Z)(b,[["render",p]]),$=S;y()(b,"components",{QCard:w.Z,QCardSection:q.Z,QIcon:v.Z,QForm:C.Z,QInput:Z.Z,QTabs:k.Z,QBtn:V.Z})}}]);