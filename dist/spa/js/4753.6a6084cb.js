"use strict";(self["webpackChunkborough_fe"]=self["webpackChunkborough_fe"]||[]).push([[4753],{84753:(e,a,t)=>{t.r(a),t.d(a,{default:()=>X});var l=t(59835),o=t(799),s=t(86970);const i={class:"q-pa-md q-mt-lg q-ml-lg"},r={class:"text-h6 page-title text-dark col-md-6"},n=(0,l.Uk)(" S1 APPLICATION - SPECIAL"),c={class:"text-right col-md-6"},d={class:"row q-my-lg"},p={class:"col-md-9 col-sm-12"},m={class:"col-md-3 q-px-md col-sm-12"},u={class:"shadow-2 q-pa-sm"},_=(0,l._)("b",null,"Legend: ",-1),g={width:"100%"},w={width:"5%"},h={class:"q-pt-xs"},b={class:"q-pr-md"},y=(0,l._)("hr",{class:"q-tabs-gutter",color:"lightgray"},null,-1),f={key:0,class:"table_container"},k={key:0,class:"no-data-found q-mt-md"},I=(0,l.Uk)(" NO DATA FOUND... "),A={key:2,class:"text-right q-mt-md"},C={key:1,class:"text-center q-pa-lg"},v={class:"loading-page"},N={class:"q-pa-md q-gutter-sm"},E=(0,l._)("div",{class:"text-h6 text-center"},"LOCK APPLICATION?",-1);function L(e,a,t,L,q,S){const T=(0,l.up)("q-icon"),W=(0,l.up)("q-btn"),O=(0,l.up)("q-card-section"),P=(0,l.up)("q-separator"),D=(0,l.up)("q-input"),R=(0,l.up)("q-badge"),U=(0,l.up)("q-tab"),x=(0,l.up)("q-tabs"),V=(0,l.up)("q-td"),Z=(0,l.up)("q-tr"),Q=(0,l.up)("q-table"),M=(0,l.up)("q-pagination"),z=(0,l.up)("q-spinner-ios"),G=(0,l.up)("q-card-actions"),F=(0,l.up)("q-card"),Y=(0,l.up)("q-dialog"),$=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",i,[(0,l.Wm)(F,{bordered:"",class:"my-card",elevated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(O,{class:"row"},{default:(0,l.w5)((()=>[(0,l._)("div",r,[(0,l.Wm)(T,{name:"list"}),n]),(0,l._)("div",c,[(0,l.Wm)(W,{label:0==e.localTimer?"":e.localTimer+" sec",elevated:"",size:"md",icon:"sync",onClick:S.refresh,disabled:e.localTimer>0,color:"primary"},null,8,["label","onClick","disabled"])])])),_:1}),(0,l.Wm)(P,{inset:""}),(0,l.Wm)(O,null,{default:(0,l.w5)((()=>[(0,l._)("div",d,[(0,l._)("div",p,[(0,l._)("form",{onSubmit:a[2]||(a[2]=(0,o.iM)((e=>S.getList(!0)),["prevent"])),method:"POST"},[(0,l.Wm)(D,{"bottom-slots":"",modelValue:e.search,"onUpdate:modelValue":a[1]||(a[1]=a=>e.search=a),outlined:"",label:"Search Applications",hint:"Hit ''Enter'' key or click search icon to search application."},{append:(0,l.w5)((()=>[(0,l.Wm)(T,{name:"search",onClick:a[0]||(a[0]=e=>S.getList(!0))})])),_:1},8,["modelValue"])],32)]),(0,l._)("div",m,[(0,l._)("div",u,[_,(0,l._)("table",g,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.legends,((e,a)=>((0,l.wg)(),(0,l.iD)("tr",{key:a},[(0,l._)("td",w,[(0,l._)("div",{class:(0,s.C_)(`legend ${e.color}`)},null,2)]),(0,l._)("td",h,[(0,l._)("small",null,[(0,l._)("strong",null,(0,s.zw)(e.title),1)])])])))),128))])])])]),(0,l.Wm)(x,{modelValue:e.active_tab,"onUpdate:modelValue":[a[3]||(a[3]=a=>e.active_tab=a),a[4]||(a[4]=e=>S.getList())],align:"left",class:"text-dark","indicator-color":"primary"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.tabs,((e,a)=>((0,l.wg)(),(0,l.j4)(U,{name:e.code,onClick:a=>S.setActiveTab(e.code),key:a,color:"primary"},{default:(0,l.w5)((()=>[(0,l.Wm)(R,{label:e.count,color:"red-14",rounded:"",floating:""},null,8,["label"]),(0,l._)("strong",b,(0,s.zw)(e.name),1)])),_:2},1032,["name","onClick"])))),128))])),_:1},8,["modelValue"]),y,e.is_loading?((0,l.wg)(),(0,l.iD)("div",C,[(0,l._)("div",v,[(0,l.Wm)(z,{color:"white",size:"3rem"})])])):((0,l.wg)(),(0,l.iD)("div",f,[e.table_data.length<=0?((0,l.wg)(),(0,l.iD)("div",k,[(0,l.Wm)(T,{name:"warning"}),I])):((0,l.wg)(),(0,l.j4)(Q,{key:1,columns:e.columns,bordered:"",rows:e.table_data,"row-key":"id","hide-bottom":"","rows-per-page-options":[e.take],onRowClick:S.update},{body:(0,l.w5)((e=>[(0,l.Wm)(Z,{props:e,class:(0,s.C_)(S.hasOwner(e.row)?S.isOwned(e.row)?"bg-yellow":"bg-hrey-4":"bg-white"),hover:"",style:{cursor:"pointer"},onClick:a=>S.update(e.row)},{default:(0,l.w5)((()=>[(0,l.Wm)(V,{key:"referrence_code",props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.row.referrence_code||"--"),1)])),_:2},1032,["props"]),(0,l.Wm)(V,{key:"application_type",props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.row.application_type),1)])),_:2},1032,["props"]),(0,l.Wm)(V,{key:"company_name",props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.row.company_name),1)])),_:2},1032,["props"]),(0,l.Wm)(V,{key:"brand",props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.row.brand),1)])),_:2},1032,["props"]),(0,l.Wm)(V,{key:"type_medium_name",props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(Array.isArray(e.row.type_medium_name)?e.row.type_medium_name.join(", "):e.row.type_medium_name),1)])),_:2},1032,["props"]),(0,l.Wm)(V,{key:"status",props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.row.status),1)])),_:2},1032,["props"]),(0,l.Wm)(V,{key:"internal_status",props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.row.internal_status),1)])),_:2},1032,["props"]),(0,l.Wm)(V,{key:"payment_status",props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.row.payment_status),1)])),_:2},1032,["props"])])),_:2},1032,["props","class","onClick"])])),_:1},8,["columns","rows","rows-per-page-options","onRowClick"])),e.max_page>0?((0,l.wg)(),(0,l.iD)("div",A,[(0,l.Wm)(M,{modelValue:e.current,"onUpdate:modelValue":[a[5]||(a[5]=a=>e.current=a),a[6]||(a[6]=e=>S.getList())],max:e.max_page,"direction-links":"",flat:"",color:"grey","active-color":"primary"},null,8,["modelValue","max"])])):(0,l.kq)("",!0)])),(0,l._)("template",null,[(0,l._)("div",N,[(0,l.Wm)(Y,{modelValue:e.lockModal,"onUpdate:modelValue":a[7]||(a[7]=a=>e.lockModal=a),persistent:"","transition-show":"scale",modern:"","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{class:"bg-red-14 text-white",style:{width:"300px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(O,null,{default:(0,l.w5)((()=>[E])),_:1}),(0,l.Wm)(G,{align:"center",class:"bg-white text-red q-py-lg"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{flat:"",label:"CONFIRM",onClick:S.confirmLock},null,8,["onClick"]),(0,l.wy)((0,l.Wm)(W,{flat:"",label:"CANCEL"},null,512),[[$]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])])),_:1})])),_:1})])}var q=t(6827);const S={data:()=>({pinkModel:!1,search:"",is_loading:!0,lockModal:!1,tabs:[{name:"ORIGINAL",code:"ORIGINAL",count:0},{name:"REVISION",code:"REVISION",count:0},{name:"COMPLIANCE",code:"COMPLIANCE",count:0}],legends:[{color:"gold",title:"FOR APPROVAL"},{color:"green",title:"APPROVED"},{color:"red",title:"DISAPPROVED"}],localTimer:null,refresh_sec:0,active_tab:"ORIGINAL",columns:[{name:"referrence_code",align:"left",label:"REFERENCE CODE",field:"referrence_code",sortable:!0},{name:"application_type",align:"left",label:"TYPE OF APPLICATION",field:"application_type",sortable:!0},{name:"company_name",align:"left",label:"COMPANY NAME",field:"company_name",sortable:!0},{name:"brand",align:"left",label:"BRAND",field:"brand",sortable:!0},{name:"type_medium_name",align:"left",label:"TYPE OF MEDIUM",field:"type_medium_name",sortable:!0},{name:"internal_status",align:"left",label:"INTERNAL STATUS",field:"internal_status",sortable:!0},{name:"payment_status",align:"left",label:"PAYMENT STATUS",field:"payment_status",sortable:!0}],table_data:[],take:10,max_page:0,current:1}),computed:{userID(){return localStorage.getItem("ui")}},mounted(){this.initApp()},watch:{},methods:{initApp(){this.refresh(),this.localTimer=localStorage.getItem("timer"),this.getList(),this.tabs.map((async e=>{e.count=await this.getCount(e.code)}))},isOwned(e){return!!e.isLocked&&(console.log(e.assigned_user.id,localStorage.getItem("ui")),e.assigned_user.id==localStorage.getItem("ui"))},hasOwner(e){return e.isLocked},setActiveTab(e){this.active_tab=e,this.current=1},refresh(){let e=this,a=e.localTimer<=0?60:e.localTimer;e.refresh_sec=60,localStorage.setItem("timer",a),setInterval((()=>{a>0&&(a--,localStorage.setItem("timer",a),this.localTimer=localStorage.getItem("timer"))}),1e3)},redirect(){window.location.href="https://www.facebook.com/"},update(e){this.$router.push({name:"individual-application-update",params:{id:e.id}})},async getList(e){let a=this;e&&(a.current=1),a.is_loading=!0;let t={data:{form_group:"INDIVIDUAL",application_type:["SPECIAL SCREENING","SPECIAL SCREENING AND CLEARING"],processType:a.active_tab,search:a.search,form_type:"s1"},params:{take:a.take,page:a.current}},{data:l,status:o}=await a.$store.dispatch("s1/getS1Applications",t);[200,201].includes(o)?(a.table_data=l.data.map((e=>{var a;return{...e,company_name:(null===e||void 0===e||null===(a=e.company)||void 0===a?void 0:a.name)||"--",type_medium_name:e.type_of_medium.length>0?e.type_of_medium.map((e=>e.type_of_medium)):"--",is_self_assigned:!0}}))||[],a.max_page=l.lastPage||0,a.is_loading=!1):a.is_loading=!1},async getCount(e){let a=this,t={data:{form_group:"INDIVIDUAL",application_type:["SPECIAL SCREENING","SPECIAL SCREENING AND CLEARING"],processType:e,search:a.search,form_type:"s1"},params:{take:a.take,page:a.current}},{data:l,status:o}=await a.$store.dispatch("s1/getS1Applications",t);return l.count},async confirmLock(){let e=this,a={assigned_user_id:this.userID,id:e.selected_item.id},{data:t,status:l}=await this.$store.dispatch("ascUser/lockApp",a);[200,201].includes(l)&&(q.Z.create({message:t.message,position:"top-right",closeBtn:"X",timeout:2e3,color:"green"}),e.lockModal=!1,this.getList())}}};var T=t(11639),W=t(44458),O=t(63190),P=t(22857),D=t(68879),R=t(50926),U=t(66611),x=t(47817),V=t(70900),Z=t(20990),Q=t(81463),M=t(31233),z=t(67220),G=t(80996),F=t(38359),Y=t(32074),$=t(11821),B=t(62146),j=t(69984),H=t.n(j);const K=(0,T.Z)(S,[["render",L]]),X=K;H()(S,"components",{QCard:W.Z,QCardSection:O.Z,QIcon:P.Z,QBtn:D.Z,QSeparator:R.Z,QInput:U.Z,QTabs:x.Z,QTab:V.Z,QBadge:Z.Z,QTable:Q.Z,QTr:M.Z,QTd:z.Z,QPagination:G.Z,QSpinnerIos:F.Z,QDialog:Y.Z,QCardActions:$.Z}),H()(S,"directives",{ClosePopup:B.Z})}}]);