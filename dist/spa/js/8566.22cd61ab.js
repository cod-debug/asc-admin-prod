"use strict";(self["webpackChunkborough_fe"]=self["webpackChunkborough_fe"]||[]).push([[8566],{8566:(e,a,t)=>{t.r(a),t.d(a,{default:()=>Se});var l=t(9835);function s(e,a,t,s,o,n){const i=(0,l.up)("app-user-accounts");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(i)])}const o={class:"q-pa-md q-mt-lg q-ml-lg"},n={class:"text-h6 page-title"},i=(0,l.Uk)(" User Account"),d=(0,l._)("hr",{class:"q-tabs-gutter",color:"lightgray"},null,-1);function r(e,a,t,s,r,c){const u=(0,l.up)("q-icon"),m=(0,l.up)("q-card-section"),p=(0,l.up)("q-separator"),_=(0,l.up)("q-tab"),g=(0,l.up)("q-btn"),w=(0,l.up)("q-tabs"),b=(0,l.up)("app-non-asc-table"),h=(0,l.up)("app-asc-table"),f=(0,l.up)("q-card");return(0,l.wg)(),(0,l.iD)("div",o,[(0,l.Wm)(f,{bordered:"",class:"my-card",elevated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l._)("div",n,[(0,l.Wm)(u,{name:"badge"}),i])])),_:1}),(0,l.Wm)(p,{inset:""}),(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,{modelValue:e.tab,"onUpdate:modelValue":a[3]||(a[3]=a=>e.tab=a),dense:"",align:"left",class:"text-dark","indicator-color":"blue","no-caps":!0},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{name:"nonasc",label:"Non ASC Users",onClick:a[0]||(a[0]=e=>c.setActiveTab("nonasc"))}),(0,l.Wm)(_,{name:"asc",label:"ASC Users",onClick:a[1]||(a[1]=e=>c.setActiveTab("asc"))}),"asc"==e.tab?((0,l.wg)(),(0,l.j4)(g,{key:0,label:"Add ASC User",elevated:"",class:"q-my-md",id:"addAscUser",size:"sm",icon:"add_circle",color:"primary",onClick:a[2]||(a[2]=e=>c.showAddASCUser(!1))})):(0,l.kq)("",!0)])),_:1},8,["modelValue"]),d,"nonasc"==e.tab?((0,l.wg)(),(0,l.j4)(b,{key:0,ref:"nonasc"},null,512)):"asc"==e.tab?((0,l.wg)(),(0,l.j4)(h,{key:1,ref:"asc",update:e.is_update},null,8,["update"])):(0,l.kq)("",!0)])),_:1})])),_:1})])}var c=t(6970);const u={class:"q-mt-md"},m={class:"loading-page"},p=(0,l._)("i",{class:"fa fa-eye"},null,-1),_={class:"text-right q-mt-md"};function g(e,a,t,s,o,n){const i=(0,l.up)("q-spinner-ios"),d=(0,l.up)("q-card-section"),r=(0,l.up)("q-badge"),g=(0,l.up)("q-td"),w=(0,l.up)("q-btn"),b=(0,l.up)("q-table"),h=(0,l.up)("q-pagination"),f=(0,l.up)("modal-add-user");return(0,l.wg)(),(0,l.iD)("div",u,[e.loading_list?((0,l.wg)(),(0,l.j4)(d,{key:0,class:"text-center q-pa-lg"},{default:(0,l.w5)((()=>[(0,l._)("div",m,[(0,l.Wm)(i,{color:"white",size:"3rem"})])])),_:1})):((0,l.wg)(),(0,l.j4)(b,{key:1,rows:e.rows,columns:s.columns,"row-key":"id",square:!0,flat:"","hide-bottom":""},{"body-cell-status":(0,l.w5)((e=>[(0,l.Wm)(g,{props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{color:n.parseStatus(e.row.status).color},{default:(0,l.w5)((()=>[(0,l.Uk)((0,c.zw)(n.parseStatus(e.row.status).val),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-actions":(0,l.w5)((e=>[(0,l.Wm)(g,{props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{dense:"",round:"",color:"green-12",onClick:a=>n.view(e.row)},{default:(0,l.w5)((()=>[p])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])),(0,l._)("div",_,[(0,l.Wm)(h,{modelValue:e.current,"onUpdate:modelValue":[a[0]||(a[0]=a=>e.current=a),n.getAllNONASC],max:e.max,"direction-links":"",flat:"",color:"grey","active-color":"primary"},null,8,["modelValue","max","onUpdate:modelValue"])]),e.show_modal_user?((0,l.wg)(),(0,l.j4)(f,{key:2,selected_item:e.selected_item,modal_type:"approval",getAllNONASC:n.getAllNONASC,closeModal:n.closeModal,is_update:e.is_update},null,8,["selected_item","getAllNONASC","closeModal","is_update"])):(0,l.kq)("",!0)])}const w={class:"q-pa-md q-gutter-sm"},b=(0,l._)("div",{class:"text-h6"},"Add ASC User",-1),h=(0,l._)("hr",{class:"q-tabs-gutter",color:"lightgray"},null,-1),f={class:"text-h6 q-mb-md"},A=(0,l.Uk)(" Personal Information:"),v={class:"form row"},q={class:"col-12 col-md-6 q-pa-md"},k={class:"col-12 col-md-6 q-pa-md"},y={class:"col-12 col-md-6 q-pa-md"},U={class:"col-12 col-md-6 q-pa-md"},C={class:"col-12 col-md-6 q-pa-md"},W={class:"text-h6 q-mb-md"},S=(0,l.Uk)(" Account Information:"),V={class:"form row"},Z={class:"col-md-12 q-pa-md"},N={key:0,class:"col-12 col-md-6 q-pa-md"},Q={key:1,class:"col-12 col-md-6 q-pa-md"},x={key:0},D=(0,l.Uk)(" Note: Proceed to Account Information to complete adding of ASC user."),M=(0,l._)("br",null,null,-1),T=(0,l.Uk)(" Save"),I=(0,l.Uk)(" Save Updates"),O=(0,l.Uk)(" Approve");function j(e,a,t,s,o,n){const i=(0,l.up)("q-space"),d=(0,l.up)("q-btn"),r=(0,l.up)("q-card-section"),c=(0,l.up)("q-tab"),u=(0,l.up)("q-tabs"),m=(0,l.up)("q-icon"),p=(0,l.up)("q-input"),_=(0,l.up)("q-select"),g=(0,l.up)("q-card"),j=(0,l.up)("q-dialog"),z=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",w,[(0,l.Wm)(j,{modelValue:e.icon,"onUpdate:modelValue":a[11]||(a[11]=a=>e.icon=a),persistent:!0},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{style:{width:"900px","max-width":"80vw"}},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{class:"row items-center q-pb-none"},{default:(0,l.w5)((()=>[b,(0,l.Wm)(i),(0,l.wy)((0,l.Wm)(d,{icon:"close",flat:"",round:"",dense:"",onClick:t.closeModal},null,8,["onClick"]),[[z]])])),_:1}),(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:e.tab,"onUpdate:modelValue":a[2]||(a[2]=a=>e.tab=a),dense:"",align:"left",class:"text-dark","indicator-color":"blue","no-caps":!0},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{name:"user",label:"User Details",onClick:a[0]||(a[0]=a=>e.active_tab="UserDetails")}),(0,l.Wm)(c,{name:"account",label:"Account Information",onClick:a[1]||(a[1]=a=>e.active_tab="AccountInfo")})])),_:1},8,["modelValue"]),h,(0,l.Wm)(g,{square:!0,flat:"",bordered:!0,class:"q-my-md"},{default:(0,l.w5)((()=>["UserDetails"==e.active_tab?((0,l.wg)(),(0,l.j4)(r,{key:0},{default:(0,l.w5)((()=>[(0,l._)("div",f,[(0,l.Wm)(m,{name:"label_important",class:"text-red-15"}),A]),(0,l._)("div",v,[(0,l._)("div",q,[(0,l.Wm)(p,{outlined:"",label:"Given Name",modelValue:e.fname,"onUpdate:modelValue":a[3]||(a[3]=a=>e.fname=a)},null,8,["modelValue"])]),(0,l._)("div",k,[(0,l.Wm)(p,{outlined:"",label:"Middle Name",modelValue:e.mname,"onUpdate:modelValue":a[4]||(a[4]=a=>e.mname=a)},null,8,["modelValue"])]),(0,l._)("div",y,[(0,l.Wm)(p,{outlined:"",label:"Last Name",modelValue:e.lname,"onUpdate:modelValue":a[5]||(a[5]=a=>e.lname=a)},null,8,["modelValue"])]),(0,l._)("div",U,[(0,l.Wm)(p,{outlined:"",label:"Mobile Number",modelValue:e.phone,"onUpdate:modelValue":a[6]||(a[6]=a=>e.phone=a)},null,8,["modelValue"])]),(0,l._)("div",C,[(0,l.Wm)(_,{outlined:"",label:"User Role",options:e.role_options,"option-label":"name","option-value":"type",modelValue:e.usertype,"onUpdate:modelValue":a[7]||(a[7]=a=>e.usertype=a)},null,8,["options","modelValue"])])])])),_:1})):"AccountInfo"==e.active_tab?((0,l.wg)(),(0,l.j4)(r,{key:1},{default:(0,l.w5)((()=>[(0,l._)("div",W,[(0,l.Wm)(m,{name:"label_important",class:"text-red-15"}),S]),(0,l._)("div",V,[(0,l._)("div",Z,[(0,l.Wm)(p,{outlined:"",label:"Email Address",modelValue:e.email,"onUpdate:modelValue":a[8]||(a[8]=a=>e.email=a),type:"email"},null,8,["modelValue"])]),t.is_update?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",N,[(0,l.Wm)(p,{outlined:"",label:"Password",modelValue:e.password,"onUpdate:modelValue":a[9]||(a[9]=a=>e.password=a),type:"password"},null,8,["modelValue"])])),t.is_update?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",Q,[(0,l.Wm)(p,{outlined:"",label:"Confirm Password",modelValue:e.confirm_password,"onUpdate:modelValue":a[10]||(a[10]=a=>e.confirm_password=a),type:"password"},null,8,["modelValue"])]))])])),_:1})):(0,l.kq)("",!0)])),_:1}),"UserDetails"==e.active_tab?((0,l.wg)(),(0,l.iD)("strong",x,[(0,l.Wm)(m,{name:"error_outline"}),D])):(0,l.kq)("",!0),M,"AccountInfo"!=e.active_tab||t.is_update?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(d,{key:1,class:"bg-blue-13 text-white",onClick:n.register},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{name:"offline_pin"}),T])),_:1},8,["onClick"])),t.is_update?((0,l.wg)(),(0,l.j4)(d,{key:2,class:"bg-blue-13 text-white",onClick:n.register},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{name:"offline_pin"}),I])),_:1},8,["onClick"])):(0,l.kq)("",!0),"AccountInfo"==e.active_tab&&t.is_update&&0==t.selected_item.status?((0,l.wg)(),(0,l.j4)(d,{key:3,class:"bg-blue-13 text-white",onClick:n.approve},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{name:"offline_pin"}),O])),_:1},8,["onClick"])):(0,l.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var z=t(6827);const B={props:["closeModal","modal_type","selected_item","is_update","getAllNONASC"],data:()=>({icon:!0,fname:"",mname:"",lname:"",phone:"",user_role:"",email:"",password:"",confirm_password:"",usertype:"",role_options:[],active_tab:"UserDetails",tab:"user"}),mounted(){this.initApp()},watch:{usertype(e,a){console.log(e)}},methods:{async getSpecific(){let e=this,a={id:e.selected_item.id},{data:t,status:l}=await this.$store.dispatch("account/getOneUser",a);if([200,201].includes(l))for(let s in t)e[s]=t[s]},async getAllUserRoles(){let e={page:1,size:50,order:"name:asc",search:""},{data:a,status:t}=await this.$store.dispatch("account/getAllUserTypes",e),l=a.rows.filter((e=>"applcnt"!=e.type));this.role_options=l.map((e=>({name:e.name,type:e.type}))),console.log(this.role_options)},async register(){let e=this,a={type:e.usertype.type,fname:e.fname.toUpperCase(),lname:e.lname.toUpperCase(),mname:e.mname.toUpperCase(),phone:e.phone,email:e.email,passwd:e.password,status:1},t="users/registerUser";e.is_update&&(delete a.passwd,a={data:{...a},params:{id:e.selected_item.id}},t="users/updateUser");let{data:l,status:s}=await e.$store.dispatch(t,a);[200,201].includes(s)?(z.Z.create({message:l.message,position:"top-right",closeBtn:"X",timeout:2e3,color:"green"}),this.closeModal()):z.Z.create({message:l.message,position:"top-right",closeBtn:"X",timeout:2e3,color:"red"})},async approve(){let e=this,a={data:{status:1},params:{id:e.selected_item.id}},{data:t,status:l}=await e.$store.dispatch("users/updateUser",a);[200,201].includes(l)?(z.Z.create({message:t.message,position:"top-right",closeBtn:"X",timeout:2e3,color:"green"}),this.closeModal(),this.getAllNONASC()):z.Z.create({message:t.message,position:"top-right",closeBtn:"X",timeout:2e3,color:"red"})},initApp(){if(this.getAllUserRoles(),"approval"===this.modal_type)for(let e in this.selected_item)this[e]=this.selected_item[e];this.is_update&&this.getSpecific()}}};var $=t(1639),P=t(2074),X=t(4458),E=t(3190),R=t(136),F=t(8879),G=t(7817),L=t(900),H=t(2857),J=t(6611),K=t(7887),Y=t(2146),ee=t(9984),ae=t.n(ee);const te=(0,$.Z)(B,[["render",j]]),le=te;ae()(B,"components",{QDialog:P.Z,QCard:X.Z,QCardSection:E.Z,QSpace:R.Z,QBtn:F.Z,QTabs:G.Z,QTab:L.Z,QIcon:H.Z,QInput:J.Z,QSelect:K.Z}),ae()(B,"directives",{ClosePopup:Y.Z});const se=[{name:"id",align:"center",label:"ID",field:"id",sortable:!0},{name:"fname",align:"center",label:"Full name",field:"fullname",sortable:!0},{name:"email_address",align:"center",label:"Email Address",field:"email"},{name:"mobile_num",align:"center",label:"Mobile Number",field:"phone"},{name:"status",align:"center",label:"Status",field:"status",sortable:!0},{name:"actions",align:"center",label:"Actions",field:"",sortable:!1}],oe={props:["tableData","update"],data:()=>({rows:[],is_update:!1,is_approval_modal:!1,selected_item:null,show_modal_user:!1,current:1,size:5,max:0,loading_list:!1}),watch:{},mounted(){this.initApp()},components:{modalAddUser:le},methods:{initApp(){this.getAllNONASC()},async getAllNONASC(){this.loading=!0;let e=this;e.loading_list=!0;let a={page:e.current,size:e.size,order:"id:asc",search:"",filter:"non"},{data:t,status:l}=await this.$store.dispatch("account/getAllUsers",a);[200,201].includes(l)&&this.$nextTick((()=>{this.rows=t.rows,e.table_data=t.rows,e.current=t.cpage,e.max=t.tpage,this.loading=!1})),e.loading_list=!1},view(e){let a=this;console.log(e),a.selected_item=e,a.is_update=!0,a.show_modal_user=!0},closeModal(){this.show_modal_user=!1},parseStatus(e){switch(e){case 0:return{val:"pending",color:"grey"};case 1:return{val:"active",color:"green"}}}},setup(){return{columns:se}}};var ne=t(8359),ie=t(1463),de=t(7220),re=t(990),ce=t(996);const ue=(0,$.Z)(oe,[["render",g]]),me=ue;ae()(oe,"components",{QCardSection:E.Z,QSpinnerIos:ne.Z,QTable:ie.Z,QTd:de.Z,QBadge:re.Z,QBtn:F.Z,QPagination:ce.Z});const pe={class:"q-mt-md"},_e={class:"loading-page"},ge=(0,l._)("i",{class:"fa fa-eye"},null,-1),we={class:"text-right q-mt-md"};function be(e,a,t,s,o,n){const i=(0,l.up)("q-spinner-ios"),d=(0,l.up)("q-card-section"),r=(0,l.up)("q-badge"),u=(0,l.up)("q-td"),m=(0,l.up)("q-btn"),p=(0,l.up)("q-table"),_=(0,l.up)("q-pagination"),g=(0,l.up)("modal-add-user");return(0,l.wg)(),(0,l.iD)("div",pe,[e.loading_list?((0,l.wg)(),(0,l.j4)(d,{key:0,class:"text-center q-pa-lg"},{default:(0,l.w5)((()=>[(0,l._)("div",_e,[(0,l.Wm)(i,{color:"white",size:"3rem"})])])),_:1})):((0,l.wg)(),(0,l.j4)(p,{key:1,rows:e.rows,columns:s.columns,"row-key":"id",square:!0,flat:"","hide-bottom":""},{"body-cell-status":(0,l.w5)((e=>[(0,l.Wm)(u,{props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{color:n.parseStatus(e.row.status).color},{default:(0,l.w5)((()=>[(0,l.Uk)((0,c.zw)(n.parseStatus(e.row.status).val),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-actions":(0,l.w5)((e=>[(0,l.Wm)(u,{props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{dense:"",round:"",color:"green-12",onClick:a=>n.view(e.row)},{default:(0,l.w5)((()=>[ge])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])),(0,l._)("div",we,[(0,l.Wm)(_,{modelValue:e.current,"onUpdate:modelValue":[a[0]||(a[0]=a=>e.current=a),n.getAllNONASC],max:e.max,"direction-links":"",flat:"",color:"grey","active-color":"primary"},null,8,["modelValue","max","onUpdate:modelValue"])]),e.show_modal_user?((0,l.wg)(),(0,l.j4)(g,{key:2,selected_item:e.selected_item,modal_type:"approval",getAllNONASC:n.getAllNONASC,closeModal:n.closeModal,is_update:e.is_update},null,8,["selected_item","getAllNONASC","closeModal","is_update"])):(0,l.kq)("",!0)])}const he=[{name:"id",align:"center",label:"ID",field:"id",sortable:!0},{name:"fname",align:"center",label:"Full name",field:"fullname",sortable:!0},{name:"email_address",align:"center",label:"Email Address",field:"email"},{name:"mobile_num",align:"center",label:"Mobile Number",field:"phone"},{name:"status",align:"center",label:"Status",field:"status",sortable:!0},{name:"actions",align:"center",label:"Actions",field:"",sortable:!1}],fe={props:["tableData","update"],data:()=>({rows:[],is_update:!1,is_approval_modal:!1,show_add_user_modal:!1,selected_item:null,show_modal_user:!1,current:1,size:5,max:0,loading_list:!1}),watch:{},mounted(){this.initApp()},components:{modalAddUser:le},methods:{initApp(){this.getAllNONASC()},async getAllNONASC(){this.loading=!0;let e=this;e.loading_list=!0;let a={page:e.current,size:e.size,order:"id:asc",search:""},{data:t,status:l}=await this.$store.dispatch("account/getAllUsers",a);[200,201].includes(l)&&this.$nextTick((()=>{this.rows=t.rows,e.table_data=t.rows,e.current=t.cpage,e.max=t.tpage,this.loading=!1})),e.loading_list=!1},view(e){let a=this;console.log(e),a.selected_item=e,a.is_update=!0,a.show_modal_user=!0},closeModal(){this.show_modal_user=!1},parseStatus(e){switch(e){case 0:return{val:"pending",color:"grey"};case 1:return{val:"active",color:"green"}}}},setup(){return{columns:he}}},Ae=(0,$.Z)(fe,[["render",be]]),ve=Ae;ae()(fe,"components",{QCardSection:E.Z,QSpinnerIos:ne.Z,QTable:ie.Z,QTd:de.Z,QBadge:re.Z,QBtn:F.Z,QPagination:ce.Z});const qe={name:"AdminAnnouncements",data:()=>({active_tab:"nonasc",all_nonc:[],loading:!0,tab:"nonasc",is_update:!1}),components:{AppNonAscTable:me,AppAscTable:ve},mounted(){this.active_tab="nonasc"},methods:{setActiveTab(e){this.tab=e},showAddASCUser(e){this.$refs.asc.show_modal_user=!0,this.$refs.asc.is_update=e}},setup(){return{}}};var ke=t(926);const ye=(0,$.Z)(qe,[["render",r]]),Ue=ye;ae()(qe,"components",{QCard:X.Z,QCardSection:E.Z,QIcon:H.Z,QSeparator:ke.Z,QTabs:G.Z,QTab:L.Z,QBtn:F.Z});const Ce={data:()=>({}),components:{AppUserAccounts:Ue},methods:{}},We=(0,$.Z)(Ce,[["render",s]]),Se=We}}]);