"use strict";(self["webpackChunkborough_fe"]=self["webpackChunkborough_fe"]||[]).push([[6112],{36112:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var s=a(59835),i=a(799),d=a(86970);const o={key:0,class:"loading-page"},l={class:"text-center"},r=(0,s._)("br",null,null,-1),n=(0,s._)("span",{class:"text-white"},"FETCHING DATA",-1),c={class:"q-pa-md"},u=(0,s.Uk)(" Product Information"),p={class:"row"},m={class:"col-12 q-pa-sm"},g={class:"col-12 q-pa-sm"},h={class:"col-12 q-pa-sm"},_=(0,s._)("hr",{class:"q-tabs-gutter",color:"lightgray"},null,-1);function b(e,t,a,b,f,v){const I=(0,s.up)("q-spinner-ios"),w=(0,s.up)("q-icon"),q=(0,s.up)("q-select"),y=(0,s.up)("q-input"),Z=(0,s.up)("q-form"),C=(0,s.up)("q-card-section"),k=(0,s.up)("q-card"),S=(0,s.up)("q-btn");return(0,s.wg)(),(0,s.iD)("div",null,[e.is_loading?((0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",l,[(0,s.Wm)(I,{color:"white",size:"3rem"}),r,n])])):(0,s.kq)("",!0),(0,s._)("div",c,[(0,s.Wm)(k,{bordered:"",class:"my-card",elevated:"",square:!0},{default:(0,s.w5)((()=>[(0,s.Wm)(C,null,{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(w,{name:"label_important",class:"text-h6 text-red-15"}),u]),(0,s.Wm)(Z,{ref:"announcement_form",onSubmit:(0,i.iM)(v.submit,["prevent"]),greedy:!0},{default:(0,s.w5)((()=>[(0,s._)("div",p,[(0,s._)("div",m,[(0,s.Wm)(q,{outlined:"",label:"Brand *",options:e.brand_options,"option-label":"desc","option-value":"id",modelValue:e.brandId,"onUpdate:modelValue":t[0]||(t[0]=t=>e.brandId=t),rules:[e=>!!e||"Field is required"]},null,8,["options","modelValue","rules"])]),(0,s._)("div",g,[(0,s.Wm)(y,{outlined:"",label:"Product *",modelValue:e.desc,"onUpdate:modelValue":t[1]||(t[1]=t=>e.desc=t),rules:[e=>!!e||"Field is required"]},null,8,["modelValue","rules"])]),(0,s._)("div",h,[(0,s.Wm)(q,{outlined:"",label:"Category *",options:e.category_options,"option-label":"desc","option-value":"id",modelValue:e.categId,"onUpdate:modelValue":t[2]||(t[2]=t=>e.categId=t),rules:[e=>!!e||"Field is required"]},null,8,["options","modelValue","rules"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1}),_,(0,s._)("div",null,[(0,s.Wm)(S,{color:"primary",class:"q-mt-xl",onClick:v.submit},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{name:"save"}),(0,s.Uk)(" "+(0,d.zw)(v.is_update?"Save Changes":"Save"),1)])),_:1},8,["onClick"])])])])}var f=a(6827);const v={data:()=>({is_loading:!1,desc:"",brandId:null,categId:null,brand_options:[],category_options:[]}),watch:{},computed:{is_update(){return this.$route.params.id?(this.getSpecific(),!0):(this.initApp(),!1)},selectedID(){return this.$route.params.id}},mounted(){},methods:{initApp(){this.getBrands(),this.getCategories()},async validate(e){return await this.$refs.announcement_form.validate()},async getSpecific(){let e=this;e.is_loading=!0;let t={id:e.selectedID};await this.getBrands(),await this.getCategories();let{data:a,status:s}=await this.$store.dispatch("product/getSpecific",t);if([200,201].includes(s)){for(let t in a)e[t]=a[t],"brandId"==t?e.brandId=e.brand_options.filter((e=>e.id==a["brandId"]))[0]:"categId"==t&&(e.categId=e.category_options.filter((e=>e.id==a["brandId"]))[0]);e.is_loading=!1}},async getBrands(){let e=this,t={page:1,size:100,order:"desc:asc",search:""},{data:a,status:s}=await e.$store.dispatch("brand/get",t);e.brand_options=a.rows},async getCategories(){let e=this,t={page:1,size:100,order:"desc:asc",search:""},{data:a,status:s}=await e.$store.dispatch("category/getCategory",t);e.category_options=a.rows},async submit(){let e=this;if(console.log(await this.validate()),await this.validate()){let t={desc:e.desc.toUpperCase(),brandId:e.brandId.id,categId:e.categId.id},a="product/add",s="created";e.is_update&&(t={data:t,id:e.selectedID},s="updated",a="product/update");let{data:i,status:d}=await this.$store.dispatch(a,t);[200,201].includes(d)?(f.Z.create({message:`Successfully ${s} Product.`,position:"top-right",closeBtn:"X",timeout:2e3,color:"green"}),this.$router.push({name:"product-lists"})):f.Z.create({message:i.message,position:"top-right",closeBtn:"X",timeout:2e3,color:"red"})}else f.Z.create({message:"Validation error. Kindly check all fields!",position:"top-right",closeBtn:"X",timeout:2e3})},isValidEmail(e){const t=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return t.test(e)||"Invalid email"}}};var I=a(11639),w=a(38359),q=a(44458),y=a(63190),Z=a(22857),C=a(8326),k=a(67887),S=a(66611),V=a(47817),$=a(68879),W=a(69984),Q=a.n(W);const z=(0,I.Z)(v,[["render",b]]),A=z;Q()(v,"components",{QSpinnerIos:w.Z,QCard:q.Z,QCardSection:y.Z,QIcon:Z.Z,QForm:C.Z,QSelect:k.Z,QInput:S.Z,QTabs:V.Z,QBtn:$.Z})}}]);