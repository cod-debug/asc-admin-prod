(self["webpackChunkborough_fe"]=self["webpackChunkborough_fe"]||[]).push([[6417,4353],{14353:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>z});var l=t(59835),s=t(799),i=t(86970);const o={class:"q-pa-md"},r=(0,l.Uk)(" Reason Information"),n={class:"row"},d={class:"col-12 col-md-6 q-pa-sm"},p={class:"col-12 col-md-6 q-pa-sm"},c={class:"col-12 q-pa-sm"},u={class:"col-12 col-md-6 q-pa-sm"},m=(0,l._)("hr",{class:"q-tabs-gutter",color:"lightgray"},null,-1);function _(e,a,t,_,w,g){const f=(0,l.up)("q-icon"),v=(0,l.up)("q-input"),b=(0,l.up)("q-select"),h=(0,l.up)("q-form"),y=(0,l.up)("q-card-section"),k=(0,l.up)("q-card"),C=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",o,[(0,l.Wm)(k,{bordered:"",class:"my-card",elevated:"",square:!0},{default:(0,l.w5)((()=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(f,{name:"label_important",class:"text-h6 text-red-15"}),r]),(0,l.Wm)(h,{ref:"announcement_form",onSubmit:(0,s.iM)(g.submit,["prevent"]),greedy:!0},{default:(0,l.w5)((()=>[(0,l._)("div",n,[(0,l._)("div",d,[(0,l.Wm)(v,{outlined:"",label:"Reference Code",modelValue:e.selected_details.referrence_code,"onUpdate:modelValue":a[0]||(a[0]=a=>e.selected_details.referrence_code=a),disable:""},null,8,["modelValue"])]),(0,l._)("div",p,[(0,l.Wm)(v,{outlined:"",label:"Application Owner",modelValue:e.selected_details.application_owner,"onUpdate:modelValue":a[1]||(a[1]=a=>e.selected_details.application_owner=a),disable:""},null,8,["modelValue"])]),(0,l._)("div",c,[(0,l.Wm)(v,{outlined:"",label:"AD Title",modelValue:e.selected_details.ad_title,"onUpdate:modelValue":a[2]||(a[2]=a=>e.selected_details.ad_title=a),disable:""},null,8,["modelValue"])]),(0,l._)("div",u,[(0,l.Wm)(b,{outlined:"",label:"ASC Internal User *",options:e.asc_users,"option-label":"fullname","option-value":"id",modelValue:e.selected_user,"onUpdate:modelValue":a[3]||(a[3]=a=>e.selected_user=a),style:{"min-width":"100%"},rules:[e=>!!e||"Field is required"]},null,8,["options","modelValue","rules"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1}),m,(0,l._)("div",null,[(0,l.Wm)(C,{color:"primary",class:"q-mt-xl",onClick:g.submit},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{name:"save"}),(0,l.Uk)(" "+(0,i.zw)(g.is_update?"Save Changes":"Save"),1)])),_:1},8,["onClick"])])])])}t(94770);var w=t(6827);const g={props:{app_details:Object},data:()=>({reason:"",asc_users:[],selected_user:null,current:1,size:1e3,max:0,loading_list:!1,selected_details:{}}),watch:{},computed:{is_update(){return!!this.$route.params.id&&(this.getSpecific(),!0)},selectedID(){return this.$route.params.id}},mounted(){this.initApp()},methods:{async validate(e){return await this.$refs.announcement_form.validate()},initApp(){let e=this;for(let a in e.app_details)e.selected_details[a]=e.app_details[a];e.selected_details.application_owner=`${e.app_details.applicant.fname} ${e.app_details.applicant.lname}`,console.log(e.selected_details,"SELECTED DETIALS INSIDE THE MODAL!"),this.getAllNONASC()},async getAllNONASC(){this.loading=!0;let e=this;e.loading_list=!0;let a={page:e.current,size:e.size,order:"id:asc",search:"",filter:"asc"},{data:t,status:l}=await this.$store.dispatch("account/getAllUsers",a);[200,201].includes(l)&&this.$nextTick((()=>{let a=t.rows.filter((a=>a.type==e.app_details.assigned_userRole.type));e.asc_users=a})),e.loading_list=!1},async getSpecific(){let e=this,a={id:e.selectedID},{data:t,status:l}=await this.$store.dispatch("reason/getSpecific",a);if(console.log(t),[200,201].includes(l))for(let s in t)e[s]=t[s]},async submit(){let e=this;if(console.log(await this.validate()),await this.validate()){let a={id:e.app_details.id,data:{assigned_user_id:e.selected_user.id,assigned_userRole:e.app_details.assigned_userRole.id}},t="asc_user/reassign",l="reassigned",{data:s,status:i}=await this.$store.dispatch(t,a);[200,201].includes(i)?w.Z.create({message:`Successfully ${l} Application`,position:"top-right",closeBtn:"X",timeout:2e3,color:"green"}):w.Z.create({message:s.message,position:"top-right",closeBtn:"X",timeout:2e3,color:"red"})}else w.Z.create({message:"Validation error. Kindly check all fields!",position:"top-right",closeBtn:"X",timeout:2e3})},isValidEmail(e){const a=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return a.test(e)||"Invalid email"}}};var f=t(11639),v=t(44458),b=t(63190),h=t(22857),y=t(8326),k=t(66611),C=t(67887),q=t(47817),A=t(68879),W=t(69984),Z=t.n(W);const D=(0,f.Z)(g,[["render",_]]),z=D;Z()(g,"components",{QCard:v.Z,QCardSection:b.Z,QIcon:h.Z,QForm:y.Z,QInput:k.Z,QSelect:C.Z,QTabs:q.Z,QBtn:A.Z})},86417:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>X});var l=t(59835),s=t(86970);const i=(0,l._)("hr",{class:"q-tabs-gutter",color:"lightgray"},null,-1),o={key:0,class:"text-center q-pa-lg"},r={class:"loading-page"},n={key:1,class:"table_container"},d={key:0},p={key:1},c={key:0},u={key:1},m={key:0},_={key:1},w={key:0},g={key:1},f={key:0},v={key:1},b={key:0},h={key:1},y={class:"text-right q-mt-md"},k={class:"q-pa-md q-gutter-sm"},C=(0,l._)("div",{class:"text-h6"},"Reassign Application",-1),q={class:"form row"},A={class:"col-12 col-md-12 q-pa-md"};function W(e,a,t,W,Z,D){const z=(0,l.up)("q-tab"),U=(0,l.up)("q-tabs"),S=(0,l.up)("q-spinner-ios"),V=(0,l.up)("q-td"),Q=(0,l.up)("q-tr"),x=(0,l.up)("q-table"),T=(0,l.up)("q-pagination"),$=(0,l.up)("q-space"),L=(0,l.up)("q-btn"),R=(0,l.up)("q-card-section"),I=(0,l.up)("addReassignment"),E=(0,l.up)("q-card"),O=(0,l.up)("q-dialog"),B=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(U,{modelValue:e.tab,"onUpdate:modelValue":a[2]||(a[2]=a=>e.tab=a),dense:"",align:"left",class:"text-dark","indicator-color":"blue","no-caps":!0},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{name:"s1",label:"S1",onClick:a[0]||(a[0]=e=>D.setActiveTab("s1"))}),(0,l.Wm)(z,{name:"s2",label:"S2",onClick:a[1]||(a[1]=e=>D.setActiveTab("s2"))})])),_:1},8,["modelValue"]),i,e.loading_list?((0,l.wg)(),(0,l.iD)("div",o,[(0,l._)("div",r,[(0,l.Wm)(S,{color:"white",size:"3rem"})])])):((0,l.wg)(),(0,l.iD)("div",n,[(0,l.Wm)(x,{columns:e.columns,flat:"",bordered:"",rows:e.table_data,"row-key":"name","hide-bottom":"",onRowClick:D.viewDetails},{body:(0,l.w5)((e=>[(0,l.Wm)(Q,{props:e,hover:"",style:{cursor:"pointer"},onClick:a=>D.viewDetails(e.row)},{default:(0,l.w5)((()=>[(0,l.Wm)(V,{key:"referrence_code",props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.row.referrence_code||"--"),1)])),_:2},1032,["props"]),(0,l.Wm)(V,{key:"ad_title",props:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.row.ad_title||"--"),1)])),_:2},1032,["props"]),(0,l.Wm)(V,{key:"evaluator",props:e},{default:(0,l.w5)((()=>[e.row.applicant?((0,l.wg)(),(0,l.iD)("div",d,(0,s.zw)(e.row.applicant.fname.toUpperCase())+" "+(0,s.zw)(e.row.applicant.lname.toUpperCase()),1)):((0,l.wg)(),(0,l.iD)("div",p," -- "))])),_:2},1032,["props"]),(0,l.Wm)(V,{key:"evaluator",props:e},{default:(0,l.w5)((()=>[e.row.evaluator?((0,l.wg)(),(0,l.iD)("div",c,(0,s.zw)(e.row.evaluator.fname.toUpperCase())+" "+(0,s.zw)(e.row.evaluator.lname.toUpperCase()),1)):((0,l.wg)(),(0,l.iD)("div",u," -- "))])),_:2},1032,["props"]),(0,l.Wm)(V,{key:"ad_spe",props:e},{default:(0,l.w5)((()=>[e.row.ad_specialist?((0,l.wg)(),(0,l.iD)("div",m,(0,s.zw)(e.row.ad_specialist.fname.toUpperCase())+" "+(0,s.zw)(e.row.ad_specialist.lname.toUpperCase()),1)):((0,l.wg)(),(0,l.iD)("div",_," -- "))])),_:2},1032,["props"]),(0,l.Wm)(V,{key:"screener",props:e},{default:(0,l.w5)((()=>[e.row.screener?((0,l.wg)(),(0,l.iD)("div",w,(0,s.zw)(e.row.screener.fname.toUpperCase())+" "+(0,s.zw)(e.row.screener.lname.toUpperCase()),1)):((0,l.wg)(),(0,l.iD)("div",g," -- "))])),_:2},1032,["props"]),(0,l.Wm)(V,{key:"reviewer",props:e},{default:(0,l.w5)((()=>[e.row.reviewer?((0,l.wg)(),(0,l.iD)("div",f,(0,s.zw)(e.row.reviewer.fname.toUpperCase())+" "+(0,s.zw)(e.row.reviewer.lname.toUpperCase()),1)):((0,l.wg)(),(0,l.iD)("div",v," -- "))])),_:2},1032,["props"]),(0,l.Wm)(V,{key:"current_user",props:e},{default:(0,l.w5)((()=>[e.row.assigned_user?((0,l.wg)(),(0,l.iD)("div",b,(0,s.zw)(e.row.assigned_user.fname.toUpperCase())+" "+(0,s.zw)(e.row.assigned_user.lname.toUpperCase()),1)):((0,l.wg)(),(0,l.iD)("div",h," -- "))])),_:2},1032,["props"])])),_:2},1032,["props","onClick"])])),_:1},8,["columns","rows","onRowClick"]),(0,l._)("div",y,[(0,l.Wm)(T,{modelValue:e.current,"onUpdate:modelValue":a[3]||(a[3]=a=>e.current=a),max:e.max,"direction-links":"",flat:"",color:"grey","active-color":"primary"},null,8,["modelValue","max"])])])),(0,l._)("div",k,[(0,l.Wm)(O,{modelValue:e.show_reassign_app_modal,"onUpdate:modelValue":a[4]||(a[4]=a=>e.show_reassign_app_modal=a),persistent:!0},{default:(0,l.w5)((()=>[(0,l.Wm)(E,{style:{width:"900px","max-width":"80vw"}},{default:(0,l.w5)((()=>[(0,l.Wm)(R,{class:"row items-center q-pb-none"},{default:(0,l.w5)((()=>[C,(0,l.Wm)($),(0,l.wy)((0,l.Wm)(L,{icon:"close",flat:"",round:"",dense:"",onClick:D.closeModal},null,8,["onClick"]),[[B]])])),_:1}),(0,l.Wm)(R,null,{default:(0,l.w5)((()=>[(0,l._)("div",q,[(0,l._)("div",A,[(0,l.Wm)(I,{app_details:e.selected_app},null,8,["app_details"])])])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])}var Z=t(14353);const D={name:"member_affiliation_list",data:()=>({columns:[{name:"referrence_code",align:"left",label:"Reference Code",field:"referrence_code",sortable:!1},{name:"ad_title",align:"left",label:"AD title",field:"ad_title",sortable:!1},{name:"application_owner",align:"left",label:"Application Owner",field:"application_owner",sortable:!1},{name:"evaluator",align:"left",label:"Evaluator",field:"evaluator",sortable:!1},{name:"ad_spe",align:"left",label:"AD Specialist",field:"ad_spe",sortable:!1},{name:"screener",align:"left",label:"Screener",field:"screener",sortable:!1},{name:"reviewer",align:"left",label:"Reviewer",field:"rev",sortable:!1},{name:"current_user",align:"left",label:"Current Assigned User",field:"current_user",sortable:!1}],show_reassign_app_modal:!1,tab:"s1",table_data:[],current:1,max:0,size:5,loading_list:!0,take:10,selected_app:null}),watch:{current(e){e&&this.getList()},tab(e){this.current=1,e&&this.getList()}},components:{addReassignment:Z["default"]},mounted(){this.initApp()},methods:{initApp(){this.getList(!1)},setActiveTab(e){this.tab=e},async getAppType(){let e=this,a={page:this.current,size:e.size,order:"reason:asc",search:""};e.loading_list=!0;let{data:t,status:l}=await e.$store.dispatch("reason/get",a);[200,201].includes(l)?(e.table_data=t.rows,e.current=t.cpage,e.max=t.tpage,e.loading_list=!1):e.loading_list=!1},async getList(e){let a=this;e&&(a.current=1),a.loading_list=!0;let t={data:{application_type:["ALL"],form_group:"ALL",search:"",process_type:"ALL",form_type:a.tab},params:{take:a.take,page:a.current}},{data:l,status:s}=await a.$store.dispatch("s1/getS1Applications",t);[200,201].includes(s)?(a.table_data=l.data.map((e=>({...e,company_name:e.company.name,type_medium_name:e.type_of_medium.length>0?e.type_of_medium.map((e=>e.type_of_medium)):"--",is_self_assigned:!0})))||[],a.max=l.lastPage||0,a.loading_list=!1):a.loading_list=!1},viewDetails(e){let a=this;a.selected_app=e,this.show_reassign_app_modal=!0},parseStatus(e){switch(e){case 0:return{val:"inactive",color:"grey"};case 1:return{val:"active",color:"green"}}},closeModal(){}}};var z=t(11639),U=t(47817),S=t(70900),V=t(38359),Q=t(81463),x=t(31233),T=t(67220),$=t(80996),L=t(32074),R=t(44458),I=t(63190),E=t(90136),O=t(68879),B=t(62146),N=t(69984),M=t.n(N);const P=(0,z.Z)(D,[["render",W]]),X=P;M()(D,"components",{QTabs:U.Z,QTab:S.Z,QSpinnerIos:V.Z,QTable:Q.Z,QTr:x.Z,QTd:T.Z,QPagination:$.Z,QDialog:L.Z,QCard:R.Z,QCardSection:I.Z,QSpace:E.Z,QBtn:O.Z}),M()(D,"directives",{ClosePopup:B.Z})},94770:()=>{}}]);