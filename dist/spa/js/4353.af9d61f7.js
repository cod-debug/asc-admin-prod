(self["webpackChunkborough_fe"]=self["webpackChunkborough_fe"]||[]).push([[4353],{14353:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>k});var a=l(59835),s=l(799),i=l(86970);const d={class:"q-pa-md"},o=(0,a.Uk)(" Reason Information"),n={class:"row"},c={class:"col-12 col-md-6 q-pa-sm"},r={class:"col-12 col-md-6 q-pa-sm"},u={class:"col-12 q-pa-sm"},p={class:"col-12 col-md-6 q-pa-sm"},m=(0,a._)("hr",{class:"q-tabs-gutter",color:"lightgray"},null,-1);function _(e,t,l,_,h,g){const f=(0,a.up)("q-icon"),b=(0,a.up)("q-input"),v=(0,a.up)("q-select"),w=(0,a.up)("q-form"),A=(0,a.up)("q-card-section"),q=(0,a.up)("q-card"),S=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",d,[(0,a.Wm)(q,{bordered:"",class:"my-card",elevated:"",square:!0},{default:(0,a.w5)((()=>[(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(f,{name:"label_important",class:"text-h6 text-red-15"}),o]),(0,a.Wm)(w,{ref:"announcement_form",onSubmit:(0,s.iM)(g.submit,["prevent"]),greedy:!0},{default:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a._)("div",c,[(0,a.Wm)(b,{outlined:"",label:"Reference Code",modelValue:e.selected_details.referrence_code,"onUpdate:modelValue":t[0]||(t[0]=t=>e.selected_details.referrence_code=t),disable:""},null,8,["modelValue"])]),(0,a._)("div",r,[(0,a.Wm)(b,{outlined:"",label:"Application Owner",modelValue:e.selected_details.application_owner,"onUpdate:modelValue":t[1]||(t[1]=t=>e.selected_details.application_owner=t),disable:""},null,8,["modelValue"])]),(0,a._)("div",u,[(0,a.Wm)(b,{outlined:"",label:"AD Title",modelValue:e.selected_details.ad_title,"onUpdate:modelValue":t[2]||(t[2]=t=>e.selected_details.ad_title=t),disable:""},null,8,["modelValue"])]),(0,a._)("div",p,[(0,a.Wm)(v,{outlined:"",label:"ASC Internal User *",options:e.asc_users,"option-label":"fullname","option-value":"id",modelValue:e.selected_user,"onUpdate:modelValue":t[3]||(t[3]=t=>e.selected_user=t),style:{"min-width":"100%"},rules:[e=>!!e||"Field is required"]},null,8,["options","modelValue","rules"])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1}),m,(0,a._)("div",null,[(0,a.Wm)(S,{color:"primary",class:"q-mt-xl",onClick:g.submit},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{name:"save"}),(0,a.Uk)(" "+(0,i.zw)(g.is_update?"Save Changes":"Save"),1)])),_:1},8,["onClick"])])])])}l(94770);var h=l(6827);const g={props:{app_details:Object},data:()=>({reason:"",asc_users:[],selected_user:null,current:1,size:1e3,max:0,loading_list:!1,selected_details:{}}),watch:{},computed:{is_update(){return!!this.$route.params.id&&(this.getSpecific(),!0)},selectedID(){return this.$route.params.id}},mounted(){this.initApp()},methods:{async validate(e){return await this.$refs.announcement_form.validate()},initApp(){let e=this;for(let t in e.app_details)e.selected_details[t]=e.app_details[t];e.selected_details.application_owner=`${e.app_details.applicant.fname} ${e.app_details.applicant.lname}`,console.log(e.selected_details,"SELECTED DETIALS INSIDE THE MODAL!"),this.getAllNONASC()},async getAllNONASC(){this.loading=!0;let e=this;e.loading_list=!0;let t={page:e.current,size:e.size,order:"id:asc",search:"",filter:"asc"},{data:l,status:a}=await this.$store.dispatch("account/getAllUsers",t);[200,201].includes(a)&&this.$nextTick((()=>{let t=l.rows.filter((t=>t.type==e.app_details.assigned_userRole.type));e.asc_users=t})),e.loading_list=!1},async getSpecific(){let e=this,t={id:e.selectedID},{data:l,status:a}=await this.$store.dispatch("reason/getSpecific",t);if(console.log(l),[200,201].includes(a))for(let s in l)e[s]=l[s]},async submit(){let e=this;if(console.log(await this.validate()),await this.validate()){let t={id:e.app_details.id,data:{assigned_user_id:e.selected_user.id,assigned_userRole:e.app_details.assigned_userRole.id}},l="asc_user/reassign",a="reassigned",{data:s,status:i}=await this.$store.dispatch(l,t);[200,201].includes(i)?h.Z.create({message:`Successfully ${a} Application`,position:"top-right",closeBtn:"X",timeout:2e3,color:"green"}):h.Z.create({message:s.message,position:"top-right",closeBtn:"X",timeout:2e3,color:"red"})}else h.Z.create({message:"Validation error. Kindly check all fields!",position:"top-right",closeBtn:"X",timeout:2e3})},isValidEmail(e){const t=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return t.test(e)||"Invalid email"}}};var f=l(11639),b=l(44458),v=l(63190),w=l(22857),A=l(8326),q=l(66611),S=l(67887),Z=l(47817),V=l(68879),y=l(69984),C=l.n(y);const $=(0,f.Z)(g,[["render",_]]),k=$;C()(g,"components",{QCard:b.Z,QCardSection:v.Z,QIcon:w.Z,QForm:A.Z,QInput:q.Z,QSelect:S.Z,QTabs:Z.Z,QBtn:V.Z})},94770:()=>{}}]);