(self["webpackChunkborough_fe"]=self["webpackChunkborough_fe"]||[]).push([[8014],{8014:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>Ce});var t=l(9835);function s(e,a,l,s,o,n){const i=(0,t.up)("app-user-accounts");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(i)])}const o={class:"q-pa-md q-mt-lg q-ml-lg"},n={class:"text-h6 page-title"},i=(0,t.Uk)(" User Account"),d=(0,t._)("hr",{class:"q-tabs-gutter",color:"lightgray"},null,-1);function c(e,a,l,s,c,r){const m=(0,t.up)("q-icon"),u=(0,t.up)("q-card-section"),p=(0,t.up)("q-separator"),_=(0,t.up)("q-tab"),g=(0,t.up)("q-btn"),w=(0,t.up)("q-tabs"),b=(0,t.up)("app-non-asc-table"),h=(0,t.up)("app-asc-table"),f=(0,t.up)("q-card");return(0,t.wg)(),(0,t.iD)("div",o,[(0,t.Wm)(f,{bordered:"",class:"my-card",elevated:""},{default:(0,t.w5)((()=>[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t._)("div",n,[(0,t.Wm)(m,{name:"badge"}),i])])),_:1}),(0,t.Wm)(p,{inset:""}),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,{modelValue:e.tab,"onUpdate:modelValue":a[2]||(a[2]=a=>e.tab=a),dense:"",align:"left",class:"text-dark","indicator-color":"blue","no-caps":!0},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{name:"nonasc",label:"Non ASC Users",onClick:a[0]||(a[0]=e=>r.setActiveTab("nonasc"))}),(0,t.Wm)(_,{name:"asc",label:"ASC Users",onClick:a[1]||(a[1]=e=>r.setActiveTab("asc"))}),"asc"==e.tab?((0,t.wg)(),(0,t.j4)(g,{key:0,label:"Add ASC User",elevated:"",class:"q-my-md",id:"addAscUser",size:"sm",icon:"add_circle",color:"primary",onClick:r.showAddASCUser},null,8,["onClick"])):(0,t.kq)("",!0)])),_:1},8,["modelValue"]),d,"nonasc"==e.tab?((0,t.wg)(),(0,t.j4)(b,{key:0,ref:"nonasc"},null,512)):"asc"==e.tab?((0,t.wg)(),(0,t.j4)(h,{key:1,ref:"asc"},null,512)):(0,t.kq)("",!0)])),_:1})])),_:1})])}var r=l(6970);const m={class:"q-mt-md"},u={class:"loading-page"},p=(0,t._)("i",{class:"fa fa-eye"},null,-1),_={class:"text-right q-mt-md"};function g(e,a,l,s,o,n){const i=(0,t.up)("q-spinner-ios"),d=(0,t.up)("q-card-section"),c=(0,t.up)("q-badge"),g=(0,t.up)("q-td"),w=(0,t.up)("q-btn"),b=(0,t.up)("q-table"),h=(0,t.up)("q-pagination"),f=(0,t.up)("modal-add-user");return(0,t.wg)(),(0,t.iD)("div",m,[e.loading_list?((0,t.wg)(),(0,t.j4)(d,{key:0,class:"text-center q-pa-lg"},{default:(0,t.w5)((()=>[(0,t._)("div",u,[(0,t.Wm)(i,{color:"white",size:"3rem"})])])),_:1})):((0,t.wg)(),(0,t.j4)(b,{key:1,rows:e.rows,columns:s.columns,"row-key":"id",square:!0,flat:"","hide-bottom":""},{"body-cell-status":(0,t.w5)((e=>[(0,t.Wm)(g,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{color:n.parseStatus(e.row.status).color},{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)(n.parseStatus(e.row.status).val),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-actions":(0,t.w5)((e=>[(0,t.Wm)(g,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{dense:"",round:"",color:"green-12",onClick:a=>n.view(e.row)},{default:(0,t.w5)((()=>[p])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])),(0,t._)("div",_,[(0,t.Wm)(h,{modelValue:e.current,"onUpdate:modelValue":[a[0]||(a[0]=a=>e.current=a),n.getAllNONASC],max:e.max,"direction-links":"",flat:"",color:"grey","active-color":"primary"},null,8,["modelValue","max","onUpdate:modelValue"])]),e.show_modal_user?((0,t.wg)(),(0,t.j4)(f,{key:2,selected_item:e.selected_item,modal_type:"approval",getAllNONASC:n.getAllNONASC,closeModal:n.closeModal,is_update:e.is_update},null,8,["selected_item","getAllNONASC","closeModal","is_update"])):(0,t.kq)("",!0)])}const w={class:"q-pa-md q-gutter-sm"},b=(0,t._)("div",{class:"text-h6"},"Add ASC User",-1),h=(0,t._)("hr",{class:"q-tabs-gutter",color:"lightgray"},null,-1),f={class:"text-h6 q-mb-md"},A=(0,t.Uk)(" Personal Information:"),v={class:"form row"},q={class:"col-12 col-md-6 q-pa-md"},y={class:"col-12 col-md-6 q-pa-md"},k={class:"col-12 col-md-6 q-pa-md"},U={class:"col-12 col-md-6 q-pa-md"},C={class:"col-12 col-md-6 q-pa-md"},W={class:"text-h6 q-mb-md"},S=(0,t.Uk)(" Account Information:"),V={class:"form row"},Z={class:"col-md-12 q-pa-md"},N={key:0,class:"col-12 col-md-6 q-pa-md"},Q={key:1,class:"col-12 col-md-6 q-pa-md"},x={key:0},D=(0,t.Uk)(" Note: Proceed to Account Information to complete adding of ASC user."),M=(0,t.Uk)(" Save"),T=(0,t.Uk)(" Approve");function I(e,a,l,s,o,n){const i=(0,t.up)("q-space"),d=(0,t.up)("q-btn"),c=(0,t.up)("q-card-section"),r=(0,t.up)("q-tab"),m=(0,t.up)("q-tabs"),u=(0,t.up)("q-icon"),p=(0,t.up)("q-input"),_=(0,t.up)("q-select"),g=(0,t.up)("q-card"),I=(0,t.up)("q-dialog"),O=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)("div",w,[(0,t.Wm)(I,{modelValue:e.icon,"onUpdate:modelValue":a[11]||(a[11]=a=>e.icon=a),persistent:!0},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{style:{width:"900px","max-width":"80vw"}},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{class:"row items-center q-pb-none"},{default:(0,t.w5)((()=>[b,(0,t.Wm)(i),(0,t.wy)((0,t.Wm)(d,{icon:"close",flat:"",round:"",dense:"",onClick:l.closeModal},null,8,["onClick"]),[[O]])])),_:1}),(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,{modelValue:e.tab,"onUpdate:modelValue":a[2]||(a[2]=a=>e.tab=a),dense:"",align:"left",class:"text-dark","indicator-color":"blue","no-caps":!0},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{name:"user",label:"User Details",onClick:a[0]||(a[0]=a=>e.active_tab="UserDetails")}),(0,t.Wm)(r,{name:"account",label:"Account Information",onClick:a[1]||(a[1]=a=>e.active_tab="AccountInfo")})])),_:1},8,["modelValue"]),h,(0,t.Wm)(g,{square:!0,flat:"",bordered:!0,class:"q-my-md"},{default:(0,t.w5)((()=>["UserDetails"==e.active_tab?((0,t.wg)(),(0,t.j4)(c,{key:0},{default:(0,t.w5)((()=>[(0,t._)("div",f,[(0,t.Wm)(u,{name:"label_important",class:"text-red-15"}),A]),(0,t._)("div",v,[(0,t._)("div",q,[(0,t.Wm)(p,{outlined:"",label:"Given Name",modelValue:e.fname,"onUpdate:modelValue":a[3]||(a[3]=a=>e.fname=a)},null,8,["modelValue"])]),(0,t._)("div",y,[(0,t.Wm)(p,{outlined:"",label:"Middle Name",modelValue:e.mname,"onUpdate:modelValue":a[4]||(a[4]=a=>e.mname=a)},null,8,["modelValue"])]),(0,t._)("div",k,[(0,t.Wm)(p,{outlined:"",label:"Last Name",modelValue:e.lname,"onUpdate:modelValue":a[5]||(a[5]=a=>e.lname=a)},null,8,["modelValue"])]),(0,t._)("div",U,[(0,t.Wm)(p,{outlined:"",label:"Mobile Number",modelValue:e.phone,"onUpdate:modelValue":a[6]||(a[6]=a=>e.phone=a)},null,8,["modelValue"])]),(0,t._)("div",C,[(0,t.Wm)(_,{outlined:"",label:"User Role",options:e.role_options,"option-label":"name","option-value":"type",modelValue:e.usertype,"onUpdate:modelValue":a[7]||(a[7]=a=>e.usertype=a)},null,8,["options","modelValue"])])])])),_:1})):"AccountInfo"==e.active_tab?((0,t.wg)(),(0,t.j4)(c,{key:1},{default:(0,t.w5)((()=>[(0,t._)("div",W,[(0,t.Wm)(u,{name:"label_important",class:"text-red-15"}),S]),(0,t._)("div",V,[(0,t._)("div",Z,[(0,t.Wm)(p,{outlined:"",label:"Email Address",modelValue:e.email,"onUpdate:modelValue":a[8]||(a[8]=a=>e.email=a),type:"email"},null,8,["modelValue"])]),l.is_update?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",N,[(0,t.Wm)(p,{outlined:"",label:"Password",modelValue:e.password,"onUpdate:modelValue":a[9]||(a[9]=a=>e.password=a),type:"password"},null,8,["modelValue"])])),l.is_update?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",Q,[(0,t.Wm)(p,{outlined:"",label:"Confirm Password",modelValue:e.confirm_password,"onUpdate:modelValue":a[10]||(a[10]=a=>e.confirm_password=a),type:"password"},null,8,["modelValue"])]))])])),_:1})):(0,t.kq)("",!0)])),_:1}),"UserDetails"==e.active_tab?((0,t.wg)(),(0,t.iD)("strong",x,[(0,t.Wm)(u,{name:"error_outline"}),D])):(0,t.kq)("",!0),"AccountInfo"!=e.active_tab||l.is_update?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(d,{key:1,class:"bg-blue-13 text-white",onClick:n.register},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{name:"offline_pin"}),M])),_:1},8,["onClick"])),"AccountInfo"==e.active_tab&&0==l.selected_item.status?((0,t.wg)(),(0,t.j4)(d,{key:2,class:"bg-blue-13 text-white",onClick:n.approve},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{name:"offline_pin"}),T])),_:1},8,["onClick"])):(0,t.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}l(8971);var O=l(4328);const j={props:["closeModal","modal_type","selected_item","is_update","getAllNONASC"],data:()=>({icon:!0,fname:"",mname:"",lname:"",phone:"",user_role:"",email:"",password:"",confirm_password:"",usertype:"",role_options:[],active_tab:"UserDetails",tab:"user"}),mounted(){this.initApp()},watch:{usertype(e,a){console.log(e)}},methods:{async getSpecific(){let e=this,a={id:e.selected_item.id},{data:l,status:t}=await this.$store.dispatch("account/getOneUser",a);if([200,201].includes(t))for(let s in l)e[s]=l[s]},async getAllUserRoles(){let e={page:1,size:50,order:"name:asc",search:""},{data:a,status:l}=await this.$store.dispatch("account/getAllUserTypes",e),t=a.rows.filter((e=>"applcnt"!=e.type));this.role_options=t.map((e=>({name:e.name,type:e.type}))),console.log(this.role_options)},async register(){let e=this,a={type:e.usertype.type,fname:e.fname.toUpperCase(),lname:e.lname.toUpperCase(),mname:e.mname.toUpperCase(),phone:e.phone,email:e.email,passwd:e.password,status:1},{data:l,status:t}=await e.$store.dispatch("users/registerUser",a);[200,201].includes(t)?(O.Z.create({message:`Successfully ${success_message} Registered.`,position:"top-right",closeBtn:"X",timeout:2e3,color:"green"}),this.closeModal()):O.Z.create({message:l.message,position:"top-right",closeBtn:"X",timeout:2e3,color:"red"})},async approve(){let e=this,a={data:{status:1},params:{id:e.selected_item.id}},{data:l,status:t}=await e.$store.dispatch("users/updateUser",a);[200,201].includes(t)?(O.Z.create({message:l.message,position:"top-right",closeBtn:"X",timeout:2e3,color:"green"}),this.closeModal(),this.getAllNONASC()):O.Z.create({message:l.message,position:"top-right",closeBtn:"X",timeout:2e3,color:"red"})},initApp(){if(this.getAllUserRoles(),"approval"===this.modal_type)for(let e in this.selected_item)this[e]=this.selected_item[e];this.is_update&&this.getSpecific()}}};var z=l(1639),B=l(2074),$=l(4458),P=l(3190),R=l(136),X=l(8879),E=l(7817),F=l(900),G=l(2857),L=l(6611),H=l(7887),J=l(2146),K=l(9984),Y=l.n(K);const ee=(0,z.Z)(j,[["render",I]]),ae=ee;Y()(j,"components",{QDialog:B.Z,QCard:$.Z,QCardSection:P.Z,QSpace:R.Z,QBtn:X.Z,QTabs:E.Z,QTab:F.Z,QIcon:G.Z,QInput:L.Z,QSelect:H.Z}),Y()(j,"directives",{ClosePopup:J.Z});const le=[{name:"id",align:"center",label:"ID",field:"id",sortable:!0},{name:"fname",align:"center",label:"Full name",field:"fullname",sortable:!0},{name:"email_address",align:"center",label:"Email Address",field:"email"},{name:"mobile_num",align:"center",label:"Mobile Number",field:"phone"},{name:"status",align:"center",label:"Status",field:"status",sortable:!0},{name:"actions",align:"center",label:"Actions",field:"",sortable:!1}],te={props:["tableData"],data:()=>({rows:[],is_update:!1,is_approval_modal:!1,selected_item:null,show_modal_user:!1,current:1,size:5,max:0,loading_list:!1}),watch:{},mounted(){this.initApp()},components:{modalAddUser:ae},methods:{initApp(){this.getAllNONASC()},async getAllNONASC(){this.loading=!0;let e=this;e.loading_list=!0;let a={page:e.current,size:e.size,order:"id:asc",search:"",filter:"non"},{data:l,status:t}=await this.$store.dispatch("account/getAllUsers",a);[200,201].includes(t)&&this.$nextTick((()=>{this.rows=l.rows,e.table_data=l.rows,e.current=l.cpage,e.max=l.tpage,this.loading=!1})),e.loading_list=!1},view(e){let a=this;console.log(e),a.selected_item=e,a.is_update=!0,a.show_modal_user=!0},closeModal(){this.show_modal_user=!1},parseStatus(e){switch(e){case 0:return{val:"pending",color:"grey"};case 1:return{val:"active",color:"green"}}}},setup(){return{columns:le}}};var se=l(8359),oe=l(1463),ne=l(7220),ie=l(990),de=l(996);const ce=(0,z.Z)(te,[["render",g]]),re=ce;Y()(te,"components",{QCardSection:P.Z,QSpinnerIos:se.Z,QTable:oe.Z,QTd:ne.Z,QBadge:ie.Z,QBtn:X.Z,QPagination:de.Z});const me={class:"q-mt-md"},ue={class:"loading-page"},pe=(0,t._)("i",{class:"fa fa-eye"},null,-1),_e={class:"text-right q-mt-md"};function ge(e,a,l,s,o,n){const i=(0,t.up)("q-spinner-ios"),d=(0,t.up)("q-card-section"),c=(0,t.up)("q-badge"),m=(0,t.up)("q-td"),u=(0,t.up)("q-btn"),p=(0,t.up)("q-table"),_=(0,t.up)("q-pagination"),g=(0,t.up)("modal-add-user");return(0,t.wg)(),(0,t.iD)("div",me,[e.loading_list?((0,t.wg)(),(0,t.j4)(d,{key:0,class:"text-center q-pa-lg"},{default:(0,t.w5)((()=>[(0,t._)("div",ue,[(0,t.Wm)(i,{color:"white",size:"3rem"})])])),_:1})):((0,t.wg)(),(0,t.j4)(p,{key:1,rows:e.rows,columns:s.columns,"row-key":"id",square:!0,flat:"","hide-bottom":""},{"body-cell-status":(0,t.w5)((e=>[(0,t.Wm)(m,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{color:n.parseStatus(e.row.status).color},{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)(n.parseStatus(e.row.status).val),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-actions":(0,t.w5)((e=>[(0,t.Wm)(m,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{dense:"",round:"",color:"green-12",onClick:a=>n.view(e.row)},{default:(0,t.w5)((()=>[pe])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])),(0,t._)("div",_e,[(0,t.Wm)(_,{modelValue:e.current,"onUpdate:modelValue":[a[0]||(a[0]=a=>e.current=a),n.getAllNONASC],max:e.max,"direction-links":"",flat:"",color:"grey","active-color":"primary"},null,8,["modelValue","max","onUpdate:modelValue"])]),e.show_modal_user?((0,t.wg)(),(0,t.j4)(g,{key:2,selected_item:e.selected_item,modal_type:"approval",getAllNONASC:n.getAllNONASC,closeModal:n.closeModal,is_update:e.is_update},null,8,["selected_item","getAllNONASC","closeModal","is_update"])):(0,t.kq)("",!0)])}const we=[{name:"id",align:"center",label:"ID",field:"id",sortable:!0},{name:"fname",align:"center",label:"Full name",field:"fullname",sortable:!0},{name:"email_address",align:"center",label:"Email Address",field:"email"},{name:"mobile_num",align:"center",label:"Mobile Number",field:"phone"},{name:"status",align:"center",label:"Status",field:"status",sortable:!0},{name:"actions",align:"center",label:"Actions",field:"",sortable:!1}],be={props:["tableData"],data:()=>({rows:[],is_update:!1,is_approval_modal:!1,show_add_user_modal:!1,selected_item:null,show_modal_user:!1,current:1,size:5,max:0,loading_list:!1}),watch:{},mounted(){this.initApp()},components:{modalAddUser:ae},methods:{initApp(){this.getAllNONASC()},async getAllNONASC(){this.loading=!0;let e=this;e.loading_list=!0;let a={page:e.current,size:e.size,order:"id:asc",search:""},{data:l,status:t}=await this.$store.dispatch("account/getAllUsers",a);[200,201].includes(t)&&this.$nextTick((()=>{this.rows=l.rows,e.table_data=l.rows,e.current=l.cpage,e.max=l.tpage,this.loading=!1})),e.loading_list=!1},view(e){let a=this;console.log(e),a.selected_item=e,a.is_update=!0,a.show_modal_user=!0},closeModal(){this.show_modal_user=!1},parseStatus(e){switch(e){case 0:return{val:"pending",color:"grey"};case 1:return{val:"active",color:"green"}}}},setup(){return{columns:we}}},he=(0,z.Z)(be,[["render",ge]]),fe=he;Y()(be,"components",{QCardSection:P.Z,QSpinnerIos:se.Z,QTable:oe.Z,QTd:ne.Z,QBadge:ie.Z,QBtn:X.Z,QPagination:de.Z});const Ae={name:"AdminAnnouncements",data:()=>({active_tab:"nonasc",all_nonc:[],loading:!0,tab:"nonasc"}),components:{AppNonAscTable:re,AppAscTable:fe},mounted(){this.active_tab="nonasc"},methods:{setActiveTab(e){this.tab=e},showAddASCUser(){this.$refs.asc.show_modal_user=!0}},setup(){return{}}};var ve=l(926);const qe=(0,z.Z)(Ae,[["render",c]]),ye=qe;Y()(Ae,"components",{QCard:$.Z,QCardSection:P.Z,QIcon:G.Z,QSeparator:ve.Z,QTabs:E.Z,QTab:F.Z,QBtn:X.Z});const ke={data:()=>({}),components:{AppUserAccounts:ye},methods:{}},Ue=(0,z.Z)(ke,[["render",s]]),Ce=Ue},8971:()=>{}}]);